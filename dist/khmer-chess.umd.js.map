{"version":3,"file":"khmer-chess.umd.js","mappings":"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","sources":["webpack://khmer-chess/webpack/universalModuleDefinition","webpack://khmer-chess/./src/KhmerChess.js","webpack://khmer-chess/./src/brain/HVPont.js","webpack://khmer-chess/./src/brain/MoveHelper.js","webpack://khmer-chess/./src/brain/Rectangle.js","webpack://khmer-chess/./src/brain/boardHelper.js","webpack://khmer-chess/./src/brain/constant.js","webpack://khmer-chess/./src/brain/genMask.js","webpack://khmer-chess/./src/brain/index.js","webpack://khmer-chess/./src/brain/jsis.js","webpack://khmer-chess/./src/index.js","webpack://khmer-chess/./src/index.umd.js","webpack://khmer-chess/./src/kpgn/Captured.js","webpack://khmer-chess/./src/kpgn/KPGN.js","webpack://khmer-chess/./src/kpgn/Move.js","webpack://khmer-chess/./src/kpgn/Player.js","webpack://khmer-chess/./src/kpgn/Result.js","webpack://khmer-chess/./src/kpgn/Timer.js","webpack://khmer-chess/./src/kpgn/index.js","webpack://khmer-chess/./src/other/EventHandler.js","webpack://khmer-chess/./src/other/base64Helper.js","webpack://khmer-chess/./src/other/index.js","webpack://khmer-chess/./src/other/table.js","webpack://khmer-chess/./src/ren/Board.js","webpack://khmer-chess/./src/ren/CountUp.js","webpack://khmer-chess/./src/ren/Graveyard.js","webpack://khmer-chess/./src/ren/KAttacked.js","webpack://khmer-chess/./src/ren/KqJumped.js","webpack://khmer-chess/./src/ren/Piece.js","webpack://khmer-chess/./src/ren/PieceIndex.js","webpack://khmer-chess/./src/ren/Point.js","webpack://khmer-chess/./src/ren/REN.js","webpack://khmer-chess/./src/ren/constant.js","webpack://khmer-chess/./src/ren/index.js","webpack://khmer-chess/webpack/bootstrap","webpack://khmer-chess/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar package_json_1 = __importDefault(require(\"../package.json\"));\r\nvar constant_1 = require(\"./brain/constant\");\r\nvar KPGN_1 = __importDefault(require(\"./kpgn/KPGN\"));\r\nvar table_1 = __importDefault(require(\"./other/table\"));\r\nvar REN_1 = __importDefault(require(\"./ren/REN\"));\r\nvar KhmerChess = /** @class */ (function () {\r\n    function KhmerChess(renStr) {\r\n        var ren = REN_1.default.fromString(renStr);\r\n        this.kpgn = new KPGN_1.default(ren);\r\n    }\r\n    KhmerChess.prototype.loadKpng = function (option) {\r\n        this.kpgn.fromJson(option);\r\n    };\r\n    KhmerChess.prototype.resetBoard = function () {\r\n        this.kpgn.ren = REN_1.default.fromString();\r\n    };\r\n    KhmerChess.prototype.getCanMoves = function () {\r\n        var pieceIndices = this.kpgn.ren.genAllCanMoves();\r\n        return pieceIndices;\r\n    };\r\n    KhmerChess.prototype.getCanMovePointsByPoint = function (point) {\r\n        var canMovePoints = this.kpgn.ren.getCanMovePointsByPoint(point);\r\n        return canMovePoints;\r\n    };\r\n    KhmerChess.prototype.validateRENStr = function (renStr) {\r\n        try {\r\n            REN_1.default.fromString(renStr);\r\n            return { valid: true, error_number: 0, error: 'No errors.' };\r\n        }\r\n        catch (error) {\r\n            return { valid: false, error_number: 1, error: error.message };\r\n        }\r\n    };\r\n    KhmerChess.prototype.getRENStr = function () {\r\n        return this.kpgn.ren.toString();\r\n    };\r\n    Object.defineProperty(KhmerChess.prototype, \"piecesInBoardMultiArray\", {\r\n        get: function () {\r\n            return this.kpgn.ren.board.piecesMultiArray;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(KhmerChess.prototype, \"piecesInBoard\", {\r\n        get: function () {\r\n            return this.kpgn.ren.board.pieces;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(KhmerChess.prototype, \"piecesInGraveyard\", {\r\n        get: function () {\r\n            return this.kpgn.ren.graveyard.pieces;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    // Khmer Portable Game Notation <file-name>.kpgn.json\r\n    KhmerChess.prototype.getKPGN = function () {\r\n        return this.kpgn.toJson();\r\n    };\r\n    KhmerChess.prototype.loadKpgn = function (kpgnJosn, options) {\r\n        this.kpgn = new KPGN_1.default(this.kpgn.ren);\r\n    };\r\n    KhmerChess.prototype.drawAscii = function () {\r\n        return (0, table_1.default)(this.kpgn.ren);\r\n    };\r\n    Object.defineProperty(KhmerChess.prototype, \"turn\", {\r\n        get: function () {\r\n            return this.kpgn.ren.turn;\r\n        },\r\n        set: function (turn) {\r\n            this.kpgn.ren.turn = turn;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    KhmerChess.prototype.move = function (moveFromIndex, moveToIndex) {\r\n        var move = this.kpgn.ren.move(moveFromIndex, moveToIndex);\r\n        this.kpgn.addMove(move);\r\n        return move;\r\n    };\r\n    /**\r\n     * Move all pieces to graveyard except kings\r\n     * -> 4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB\r\n     */\r\n    KhmerChess.prototype.clearBoard = function () {\r\n        this.kpgn.ren = REN_1.default.fromString('4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB');\r\n    };\r\n    KhmerChess.prototype.getHistories = function () {\r\n        return this.kpgn.moves;\r\n    };\r\n    KhmerChess.toKhmerNum = function (englishNum) {\r\n        var str = \"\" + englishNum;\r\n        var result = str.split('').map(function (c) {\r\n            return constant_1.VERTICAL_NOTE_LETTERS[constant_1.VERTICAL_NOTE_LETTERS_ENGLISH.indexOf(c)];\r\n        }).join('');\r\n        return result;\r\n    };\r\n    KhmerChess.title = package_json_1.default.name;\r\n    KhmerChess.version = package_json_1.default.version;\r\n    return KhmerChess;\r\n}());\r\nexports.default = KhmerChess;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=KhmerChess.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"./constant\");\r\nvar jsis_1 = __importDefault(require(\"./jsis\"));\r\nvar HVPont = /** @class */ (function () {\r\n    function HVPont(h, v) {\r\n        if (jsis_1.default.isUndefined(v)) {\r\n            h = h[0];\r\n            v = h[1];\r\n        }\r\n        this.h = h;\r\n        this.v = Number(v);\r\n    }\r\n    Object.defineProperty(HVPont.prototype, \"x\", {\r\n        get: function () {\r\n            return constant_1.HORIZONTAL_CODE_LETTERS.indexOf(this.h);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HVPont.prototype, \"y\", {\r\n        get: function () {\r\n            return this.v - 1;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HVPont.prototype, \"indexCode\", {\r\n        get: function () {\r\n            return \"\" + this.h + this.v;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return HVPont;\r\n}());\r\nexports.default = HVPont;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=HVPont.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\r\nvar boardHelper_1 = __importDefault(require(\"./boardHelper\"));\r\nvar constant_1 = require(\"./constant\");\r\nvar MoveHelper = /** @class */ (function () {\r\n    function MoveHelper() {\r\n    }\r\n    Object.defineProperty(MoveHelper.prototype, \"isWhiteTurn\", {\r\n        get: function () {\r\n            return Piece_1.default.isWhiteColor(this.currentTurn);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    MoveHelper.prototype.init = function (option) {\r\n        this.piecesString = option.piecesString;\r\n        this.currentTurn = option.currentTurn;\r\n        this.isQueenMoved = option.isQueenMoved;\r\n        this.isKingMoved = option.isKingMoved;\r\n        this.genCanMove = option.genCanMove;\r\n        this.genCanMoveForAnother = option.genCanMoveForAnother;\r\n        this.whiteMoves = [];\r\n        this.blackMoves = [];\r\n        this.whiteKingInDanger = null;\r\n        this.whiteKingWillInDanger = null;\r\n        this.blackKingInDanger = null;\r\n        this.blackKingWillInDanger = null;\r\n        this.winColor = null;\r\n        this.stuckColor = null;\r\n    };\r\n    MoveHelper.prototype.generateCanMoves = function () {\r\n        var _this = this;\r\n        var filter = boardHelper_1.default.filterPieceInBoard(this.piecesString);\r\n        this.whiteMoves = filter.whitePieces;\r\n        this.blackMoves = filter.blackPieces;\r\n        var genMoves = function (pieceIndices) {\r\n            pieceIndices.forEach(function (pieceIndex) {\r\n                var isHaveMoved = _this.isKingMoved;\r\n                if (pieceIndex.piece !== null) {\r\n                    if (pieceIndex.piece !== null && !pieceIndex.piece.isTypeKing) {\r\n                        isHaveMoved = pieceIndex.piece.isTypeQueen ? _this.isQueenMoved : false;\r\n                    }\r\n                    var canMovePoints = _this.genCanMovePointsByPiecePoint(pieceIndex.point, pieceIndex.piece, _this.piecesString, isHaveMoved);\r\n                    pieceIndex.canMovePoints = canMovePoints;\r\n                }\r\n            });\r\n        };\r\n        genMoves(this.whiteMoves);\r\n        genMoves(this.blackMoves);\r\n    };\r\n    MoveHelper.prototype.cleanPieceNoMove = function () {\r\n        var cleanMoves = function (pieces) {\r\n            var isTrue = true;\r\n            while (isTrue) {\r\n                isTrue = false;\r\n                for (var i = 0; i < pieces.length; i++) {\r\n                    var piece = pieces[i];\r\n                    if (!piece.canMovePoints.length) {\r\n                        pieces.splice(i, 1);\r\n                        isTrue = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        cleanMoves(this.whiteMoves);\r\n        cleanMoves(this.blackMoves);\r\n    };\r\n    MoveHelper.prototype.checkIfKingInDanger = function () {\r\n        this.whiteKingInDanger = boardHelper_1.default.getKingInDanger(constant_1.PIECE_COLOR_WHITE, this.piecesString);\r\n        this.whiteKingWillInDanger = boardHelper_1.default.getKingWillInDanger(constant_1.PIECE_COLOR_WHITE, this.piecesString);\r\n        this.blackKingInDanger = boardHelper_1.default.getKingInDanger(constant_1.PIECE_COLOR_BLACK, this.piecesString);\r\n        this.blackKingWillInDanger = boardHelper_1.default.getKingWillInDanger(constant_1.PIECE_COLOR_BLACK, this.piecesString);\r\n    };\r\n    MoveHelper.prototype.genWinLost = function () {\r\n        if (this.whiteKingInDanger && !this.whiteMoves.length) {\r\n            this.winColor = constant_1.PIECE_COLOR_BLACK;\r\n        }\r\n        else if (this.blackKingInDanger && !this.blackMoves.length) {\r\n            this.winColor = constant_1.PIECE_COLOR_WHITE;\r\n        }\r\n    };\r\n    MoveHelper.prototype.getStuck = function () {\r\n        if (this.winColor) {\r\n            return;\r\n        }\r\n        if (this.isWhiteTurn && !this.whiteMoves.length) {\r\n            this.stuckColor = constant_1.PIECE_COLOR_WHITE;\r\n        }\r\n        else if (!this.isWhiteTurn && !this.blackMoves.length) {\r\n            this.stuckColor = constant_1.PIECE_COLOR_BLACK;\r\n        }\r\n    };\r\n    MoveHelper.prototype.calcCanMove = function (option) {\r\n        this.init(option);\r\n        this.generateCanMoves();\r\n        this.cleanPieceNoMove();\r\n        var moves = [];\r\n        if (this.genCanMove) {\r\n            moves = this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\r\n        }\r\n        var anotherMoves = [];\r\n        if (this.genCanMoveForAnother) {\r\n            anotherMoves = !this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\r\n        }\r\n        return {\r\n            moves: moves,\r\n            anotherMoves: anotherMoves,\r\n        };\r\n    };\r\n    MoveHelper.prototype.calcState = function (option) {\r\n        this.init(option);\r\n        this.generateCanMoves();\r\n        this.cleanPieceNoMove();\r\n        this.checkIfKingInDanger();\r\n        this.genWinLost();\r\n        this.getStuck();\r\n        return {\r\n            blackKingInDanger: this.blackKingInDanger,\r\n            whiteKingInDanger: this.whiteKingInDanger,\r\n            blackKingWillInDanger: this.blackKingWillInDanger,\r\n            whiteKingWillInDanger: this.whiteKingWillInDanger,\r\n            winColor: this.winColor,\r\n            stuckColor: this.stuckColor,\r\n        };\r\n    };\r\n    MoveHelper.prototype.calCount = function (_a) {\r\n        var color = _a.color, piecesString = _a.piecesString, force = _a.force;\r\n        return boardHelper_1.default.checkCount(color, piecesString, force);\r\n    };\r\n    MoveHelper.prototype.genCanMovePointsByPiecePoint = function (point, piece, piecesString, isHasMoved) {\r\n        return boardHelper_1.default.genCanMovePointsByPiecePoint(point.index, piece, piecesString, isHasMoved);\r\n    };\r\n    return MoveHelper;\r\n}());\r\nexports.default = MoveHelper;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=MoveHelper.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"./constant\");\r\nvar Rectangle = /** @class */ (function () {\r\n    function Rectangle(x, y, width, height) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    Rectangle.prototype.isContainsPoint = function (point) {\r\n        var x = point.x, y = point.y;\r\n        var isContainsPoint = this.x <= x &&\r\n            (this.x + this.width) >= x &&\r\n            this.y <= y &&\r\n            (this.y + this.height) >= y;\r\n        return isContainsPoint;\r\n    };\r\n    Rectangle.isValidPoint = function (point) {\r\n        return new Rectangle(0, 0, constant_1.ROW_LAST_INDEX, constant_1.ROW_LAST_INDEX).isContainsPoint(point);\r\n    };\r\n    return Rectangle;\r\n}());\r\nexports.default = Rectangle;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Rectangle.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CountUpState = void 0;\r\nvar jsis_1 = __importDefault(require(\"./jsis\"));\r\nvar genMask_1 = __importDefault(require(\"./genMask\"));\r\nvar constant_1 = require(\"./constant\");\r\nvar Point_1 = __importDefault(require(\"../ren/Point\"));\r\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\r\nvar Rectangle_1 = __importDefault(require(\"./Rectangle\"));\r\nvar ren_1 = require(\"../ren\");\r\nvar mask = (0, genMask_1.default)();\r\nvar CountUpState = /** @class */ (function () {\r\n    function CountUpState(countingNumber, countingToNumber) {\r\n        this.countingNumber = countingNumber;\r\n        this.countingToNumber = countingToNumber;\r\n    }\r\n    return CountUpState;\r\n}());\r\nexports.CountUpState = CountUpState;\r\nvar BoardHelper = /** @class */ (function () {\r\n    function BoardHelper() {\r\n        this.convertMask = function (point1, index, color) {\r\n            var sign = Piece_1.default.isWhiteColor(color) ? 1 : -1;\r\n            var point2 = Point_1.default.fromIndex(index);\r\n            point1.x = point1.x * sign + point2.x;\r\n            point1.y = point1.y * sign + point2.y;\r\n            return Rectangle_1.default.isValidPoint(point1) ? point1.index : null;\r\n        };\r\n    }\r\n    BoardHelper.prototype.getCharPieceFromString = function (piecesString, index) {\r\n        if (Point_1.default.isIndexInBoard(index) && piecesString.length === constant_1.CELL_COUNT) {\r\n            return piecesString[index];\r\n        }\r\n        return constant_1.EMPTY_PIECE;\r\n    };\r\n    BoardHelper.prototype.getCharPieceInPos = function (index, piecesString) {\r\n        return this.getCharPieceFromString(piecesString, index);\r\n    };\r\n    BoardHelper.prototype.getPieceByIndex = function (index, piecesString) {\r\n        var charCode = this.getCharPieceInPos(index, piecesString);\r\n        return {\r\n            isValidPiece: Piece_1.default.isValidPiece(charCode),\r\n            piece: Piece_1.default.fromCharCode(charCode),\r\n        };\r\n    };\r\n    BoardHelper.prototype.getPieceCanMovePoses = function (index, piece) {\r\n        var _this = this;\r\n        var pieceIndices = [];\r\n        mask[piece.type].forEach(function (_pos) {\r\n            var newIndex = _this.convertMask(new Point_1.default(_pos[0], _pos[1]), index, piece.color);\r\n            if (newIndex !== null) {\r\n                pieceIndices.push(newIndex);\r\n            }\r\n        });\r\n        return pieceIndices;\r\n    };\r\n    BoardHelper.prototype.getPieceCanMovePosesValid = function (index, piece, piecesString) {\r\n        var _poses = this.getPieceCanMovePoses(index, piece);\r\n        var pieceIndices = [];\r\n        var n = _poses.length;\r\n        var thisPos = Point_1.default.fromIndex(index);\r\n        for (var i = 0; i < n; i++) {\r\n            var p = Point_1.default.fromIndex(_poses[i]);\r\n            var distPiece = this.getPieceByIndex(p.index, piecesString);\r\n            if (distPiece.isValidPiece) {\r\n                if (distPiece.piece && piece.color === distPiece.piece.color ||\r\n                    (piece.isTypeFish && p.x === thisPos.x)) {\r\n                    p = null;\r\n                }\r\n            }\r\n            else {\r\n                if (piece.isTypeFish && p.x !== thisPos.x) {\r\n                    p = null;\r\n                }\r\n            }\r\n            if (p !== null && piece.isTypeBoat) {\r\n                var _x = thisPos.x;\r\n                var _y = thisPos.y;\r\n                if (p.x === thisPos.x) {\r\n                    var _n = Math.abs(p.y - thisPos.y);\r\n                    var _s = thisPos.y < p.y ? 1 : -1;\r\n                    while (--_n > 0) {\r\n                        if (this.getPieceByIndex(Point_1.default.xyToIndex(_x, _y + _s * _n), piecesString).isValidPiece) {\r\n                            p = null;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                else if (p.y === thisPos.y) {\r\n                    var _n = Math.abs(p.x - thisPos.x);\r\n                    var _s = thisPos.x < p.x ? 1 : -1;\r\n                    while (--_n > 0) {\r\n                        if (this.getPieceByIndex(Point_1.default.xyToIndex(_x + _s * _n, _y), piecesString).isValidPiece) {\r\n                            p = null;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (!jsis_1.default.isNull(p)) {\r\n                pieceIndices.push(_poses[i]);\r\n            }\r\n        }\r\n        return pieceIndices;\r\n    };\r\n    BoardHelper.prototype.replacePiecesStringAtIndex = function (piecesString, charCode, index) {\r\n        return piecesString.substring(0, index) + charCode + piecesString.substring(index + 1);\r\n    };\r\n    BoardHelper.prototype.injectPiece = function (piecesString, index1, index2) {\r\n        var c = piecesString[index1];\r\n        if (!this.isCharPiecesInBoard(c, piecesString)) {\r\n            return null;\r\n        }\r\n        piecesString = this.replacePiecesStringAtIndex(piecesString, constant_1.EMPTY_PIECE, index1);\r\n        piecesString = this.replacePiecesStringAtIndex(piecesString, c, index2);\r\n        return piecesString;\r\n    };\r\n    BoardHelper.prototype.getKingWillInDanger = function (color, piecesString) {\r\n        var kingPos = piecesString.indexOf(new Piece_1.default(constant_1.PIECE_TYPE_KING, color).pieceCharCode);\r\n        var n = piecesString.length;\r\n        for (var i = 0; i < n; i++) {\r\n            var p = this.getPieceByIndex(i, piecesString);\r\n            if (p.piece !== null && p.isValidPiece && p.piece.color !== color &&\r\n                p.piece.isTypeBoat) {\r\n                var _poses = this.getPieceCanMovePoses(i, p.piece);\r\n                for (var j = 0; j < _poses.length; j++) {\r\n                    if (_poses[j] === kingPos) {\r\n                        return [Point_1.default.fromIndex(i), Point_1.default.fromIndex(kingPos)];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    BoardHelper.prototype.getKingInDanger = function (color, piecesString) {\r\n        var kingPos = piecesString.indexOf(new Piece_1.default(constant_1.PIECE_TYPE_KING, color).pieceCharCode);\r\n        var n = piecesString.length;\r\n        for (var i = 0; i < n; i++) {\r\n            var p = this.getPieceByIndex(i, piecesString);\r\n            if (p.piece !== null && p.isValidPiece && p.piece.color !== color) {\r\n                var _poses = this.getPieceCanMovePosesValid(i, p.piece, piecesString);\r\n                for (var j = 0; j < _poses.length; j++) {\r\n                    if (_poses[j] === kingPos) {\r\n                        return [Point_1.default.fromIndex(i), Point_1.default.fromIndex(kingPos)];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    BoardHelper.prototype.genCanMovePointsByPiecePoint = function (index, piece, piecesString, isHasMoved) {\r\n        var _poses = this.getPieceCanMovePosesValid(index, piece, piecesString);\r\n        var isHaveCaptured = this.isHaveCaptured(piecesString);\r\n        if (piece.isTypeKing) {\r\n            if (!isHaveCaptured && !isHasMoved) {\r\n                var p = this.convertMask(new Point_1.default(2, 1), index, piece.color);\r\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\r\n                    _poses.push(p);\r\n                }\r\n                p = this.convertMask(new Point_1.default(-2, 1), index, piece.color);\r\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\r\n                    _poses.push(p);\r\n                }\r\n            }\r\n        }\r\n        else if (piece.isTypeQueen) {\r\n            if (!isHaveCaptured && !isHasMoved) {\r\n                var p = this.convertMask(new Point_1.default(-0, 2), index, piece.color);\r\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\r\n                    _poses.push(p);\r\n                }\r\n            }\r\n        }\r\n        var n = _poses.length;\r\n        var points = [];\r\n        for (var i = 0; i < n; i++) {\r\n            var str = this.injectPiece(piecesString, index, _poses[i]);\r\n            if (str !== null && this.getKingInDanger(piece.color, str) === null) {\r\n                points.push(Point_1.default.fromIndex(_poses[i]));\r\n            }\r\n        }\r\n        return points;\r\n    };\r\n    BoardHelper.prototype.isCharPiecesInBoard = function (code, piecesString) {\r\n        return !!~piecesString.indexOf(code);\r\n    };\r\n    BoardHelper.prototype.getPiecesInBoard = function (piecesString) {\r\n        return piecesString.split('').filter(function (charCode) {\r\n            return Piece_1.default.isValidPiece(charCode);\r\n        });\r\n    };\r\n    BoardHelper.prototype.isHaveCaptured = function (piecesString) {\r\n        return this.getPiecesInBoard(piecesString).length < constant_1.ROW_NUMBER * 4;\r\n    };\r\n    BoardHelper.prototype.filterPieceInBoard = function (piecesString) {\r\n        var whitePieces = [];\r\n        var blackPieces = [];\r\n        for (var i = 0; i < piecesString.length; i++) {\r\n            var charCode = piecesString[i];\r\n            if (Piece_1.default.isValidPiece(charCode)) {\r\n                var pieceIndex = new ren_1.PieceIndex(Point_1.default.fromIndex(i), Piece_1.default.fromCharCode(charCode));\r\n                if (pieceIndex.piece !== null && pieceIndex.piece.isColorWhite) {\r\n                    whitePieces.push(pieceIndex);\r\n                }\r\n                else {\r\n                    blackPieces.push(pieceIndex);\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            whitePieces: whitePieces,\r\n            blackPieces: blackPieces,\r\n        };\r\n    };\r\n    BoardHelper.prototype.extractPiecesToArray = function (piecesString) {\r\n        var _a;\r\n        var piecesStringArr = piecesString.split('');\r\n        var pieceAll = (_a = {},\r\n            _a[constant_1.PIECE_COLOR_BLACK] = [],\r\n            _a[constant_1.PIECE_COLOR_WHITE] = [],\r\n            _a);\r\n        piecesStringArr.forEach(function (charCode) {\r\n            if (charCode === constant_1.EMPTY_PIECE) {\r\n                return;\r\n            }\r\n            var piece = Piece_1.default.fromCharCode(charCode);\r\n            if (piece) {\r\n                pieceAll[piece.color].push(piece.type);\r\n            }\r\n        });\r\n        return pieceAll;\r\n    };\r\n    BoardHelper.prototype.isStateCount = function (c, piecesString) {\r\n        var allPieces = this.extractPiecesToArray(piecesString);\r\n        return allPieces[c].length === 1;\r\n    };\r\n    BoardHelper.prototype.checkCountable = function (color, piecesString) {\r\n        var pieceAll = this.extractPiecesToArray(piecesString);\r\n        var weaker = pieceAll[color];\r\n        var stronger = pieceAll[Piece_1.default.oppositeColor(color)];\r\n        return weaker.length <= 2 && stronger.length >= 2;\r\n    };\r\n    BoardHelper.prototype.checkCount = function (color, piecesString, force) {\r\n        var countChar = function (str, c) {\r\n            return str.join('').split(c).length - 1;\r\n        };\r\n        var charExist = function (str, c) {\r\n            return !!~str.indexOf(c);\r\n        };\r\n        var pieceAll = this.extractPiecesToArray(piecesString);\r\n        var weaker = pieceAll[color];\r\n        var stronger = pieceAll[Piece_1.default.oppositeColor(color)];\r\n        if (weaker.length === 1 && stronger.length > 1) {\r\n            if (!charExist(stronger, constant_1.PIECE_TYPE_FISH)) {\r\n                var count = 64;\r\n                var toukCount = countChar(stronger, constant_1.PIECE_TYPE_BOAT);\r\n                if (toukCount) {\r\n                    count = toukCount > 1 ? 8 : 16;\r\n                }\r\n                else if (countChar(stronger, constant_1.PIECE_TYPE_GENERAL) > 1) {\r\n                    count = 22;\r\n                }\r\n                else if (countChar(stronger, constant_1.PIECE_TYPE_HORSE) > 1) {\r\n                    count = 32;\r\n                }\r\n                else if (countChar(stronger, constant_1.PIECE_TYPE_GENERAL)) {\r\n                    count = 44;\r\n                }\r\n                // FIXME: when touk 2 and stronger.length > 8 => start > count\r\n                var start = stronger.length;\r\n                if (start > 4) {\r\n                    start = 4;\r\n                }\r\n                return new CountUpState(start, count);\r\n            }\r\n            return new CountUpState(0, 64);\r\n        }\r\n        else if (force && this.checkCountable(color, piecesString)) {\r\n            return new CountUpState(0, 64);\r\n        }\r\n        return null;\r\n    };\r\n    BoardHelper.prototype.isUpgradable = function (piece, point) {\r\n        if (piece.isTypeFish) {\r\n            if (piece.isColorBlack && point.y <= 2) {\r\n                return true;\r\n            }\r\n            if (piece.isColorWhite && point.y >= 5) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    return BoardHelper;\r\n}());\r\n;\r\nexports.default = new BoardHelper();\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=boardHelper.js.map","\"use strict\";\r\nvar _a, _b, _c, _d;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.VERTICAL_NOTE_LETTERS_ENGLISH = exports.HORIZONTAL_NOTE_LETTERS_ENGLISH = exports.VERTICAL_NOTE_LETTERS = exports.HORIZONTAL_NOTE_LETTERS = exports.HORIZONTAL_CODE_LETTERS = exports.CELL_COUNT = exports.ROW_LAST_INDEX = exports.ROW_FIRST_INDEX = exports.ROW_NUMBER = exports.BOARD_SEPARATOR = exports.PIECE_COLOR_EMPTY = exports.EMPTY_PIECE = exports.PIECE_NAMES_ENGLISH = exports.PIECE_NAMES = exports.PIECE_TYPE_TRANSFORM_FISH = exports.PIECE_TYPE_FISH = exports.PIECE_TYPE_QUEEN = exports.PIECE_TYPE_KING = exports.PIECE_TYPE_GENERAL = exports.PIECE_TYPE_HORSE = exports.PIECE_TYPE_BOAT = exports.COLOR_NAMES_ENGLISH = exports.COLOR_NAMES = exports.PIECE_COLOR_BLACK = exports.PIECE_COLOR_WHITE = void 0;\r\nexports.PIECE_COLOR_WHITE = 'w';\r\nexports.PIECE_COLOR_BLACK = 'b';\r\nexports.COLOR_NAMES = (_a = {},\r\n    _a[exports.PIECE_COLOR_BLACK] = 'ខ្មៅ',\r\n    _a[exports.PIECE_COLOR_WHITE] = 'ស',\r\n    _a);\r\nexports.COLOR_NAMES_ENGLISH = (_b = {},\r\n    _b[exports.PIECE_COLOR_BLACK] = 'black',\r\n    _b[exports.PIECE_COLOR_WHITE] = 'white',\r\n    _b);\r\nexports.PIECE_TYPE_BOAT = 'b'; // Boat\r\nexports.PIECE_TYPE_HORSE = 'h'; // Horse\r\nexports.PIECE_TYPE_GENERAL = 'g'; // General\r\nexports.PIECE_TYPE_KING = 'k'; // King\r\nexports.PIECE_TYPE_QUEEN = 'q'; // Queen\r\nexports.PIECE_TYPE_FISH = 'f'; // Fish\r\nexports.PIECE_TYPE_TRANSFORM_FISH = 't'; // Transform fish\r\nexports.PIECE_NAMES = (_c = {},\r\n    _c[exports.PIECE_TYPE_BOAT] = 'ទូក',\r\n    _c[exports.PIECE_TYPE_HORSE] = 'សេះ',\r\n    _c[exports.PIECE_TYPE_GENERAL] = 'គោល',\r\n    _c[exports.PIECE_TYPE_KING] = 'ស្តេច',\r\n    _c[exports.PIECE_TYPE_QUEEN] = 'នាង',\r\n    _c[exports.PIECE_TYPE_FISH] = 'ត្រី',\r\n    _c[exports.PIECE_TYPE_TRANSFORM_FISH] = 'ត្រីបក',\r\n    _c);\r\nexports.PIECE_NAMES_ENGLISH = (_d = {},\r\n    _d[exports.PIECE_TYPE_BOAT] = 'boat',\r\n    _d[exports.PIECE_TYPE_HORSE] = 'horse',\r\n    _d[exports.PIECE_TYPE_GENERAL] = 'general',\r\n    _d[exports.PIECE_TYPE_KING] = 'king',\r\n    _d[exports.PIECE_TYPE_QUEEN] = 'queen',\r\n    _d[exports.PIECE_TYPE_FISH] = 'fish',\r\n    _d[exports.PIECE_TYPE_TRANSFORM_FISH] = 'transformed-fish',\r\n    _d);\r\nexports.EMPTY_PIECE = '.';\r\nexports.PIECE_COLOR_EMPTY = '.';\r\nexports.BOARD_SEPARATOR = '/';\r\nexports.ROW_NUMBER = 8;\r\nexports.ROW_FIRST_INDEX = 0;\r\nexports.ROW_LAST_INDEX = 7;\r\nexports.CELL_COUNT = exports.ROW_NUMBER * exports.ROW_NUMBER;\r\nexports.HORIZONTAL_CODE_LETTERS = 'abcdefgh';\r\nexports.HORIZONTAL_NOTE_LETTERS = ['ក', 'ខ', 'គ', 'ឃ', 'ង', 'ច', 'ឆ', 'ជ'];\r\nexports.VERTICAL_NOTE_LETTERS = ['០', '១', '២', '៣', '៤', '៥', '៦', '៧', '៨', '៩'];\r\nexports.HORIZONTAL_NOTE_LETTERS_ENGLISH = 'abcdefgh';\r\nexports.VERTICAL_NOTE_LETTERS_ENGLISH = Array.from({ length: 10 }, function (_, i) { return \"\" + i; });\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=constant.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"./constant\");\r\nfunction genMask() {\r\n    var mask = {};\r\n    mask[constant_1.PIECE_TYPE_BOAT] = [\r\n        [0, 1], [0, 2], [0, 3], [0, 4], [0, 5], [0, 6], [0, 7], [0, 8],\r\n        [0, -1], [0, -2], [0, -3], [0, -4], [0, -5], [0, -6], [0, -7], [0, -8],\r\n        [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\r\n        [-1, 0], [-2, 0], [-3, 0], [-4, 0], [-5, 0], [-6, 0], [-7, 0], [-8, 0],\r\n    ];\r\n    mask[constant_1.PIECE_TYPE_HORSE] = [\r\n        [-1, -2],\r\n        [1, -2],\r\n        [-2, -1],\r\n        [2, -1],\r\n        [-1, 2],\r\n        [1, 2],\r\n        [-2, 1],\r\n        [2, 1],\r\n    ];\r\n    mask[constant_1.PIECE_TYPE_QUEEN] = [\r\n        [-1, -1],\r\n        [1, -1],\r\n        [-1, 1],\r\n        [1, 1],\r\n    ];\r\n    mask[constant_1.PIECE_TYPE_GENERAL] = mask[constant_1.PIECE_TYPE_QUEEN].concat([\r\n        [0, 1],\r\n    ]);\r\n    mask[constant_1.PIECE_TYPE_KING] = mask[constant_1.PIECE_TYPE_GENERAL].concat([\r\n        [0, -1],\r\n        [1, 0],\r\n        [-1, 0],\r\n    ]);\r\n    mask[constant_1.PIECE_TYPE_FISH] = [\r\n        [0, 1],\r\n        [-1, 1],\r\n        [1, 1],\r\n    ];\r\n    mask[constant_1.PIECE_TYPE_TRANSFORM_FISH] = mask[constant_1.PIECE_TYPE_QUEEN];\r\n    return mask;\r\n}\r\nexports.default = genMask;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=genMask.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MoveHelper = exports.HVPont = exports.jsis = exports.genMask = exports.boardHelper = exports.Rectangle = void 0;\r\nvar Rectangle_1 = require(\"./Rectangle\");\r\nObject.defineProperty(exports, \"Rectangle\", { enumerable: true, get: function () { return __importDefault(Rectangle_1).default; } });\r\nvar boardHelper_1 = require(\"./boardHelper\");\r\nObject.defineProperty(exports, \"boardHelper\", { enumerable: true, get: function () { return __importDefault(boardHelper_1).default; } });\r\nvar genMask_1 = require(\"./genMask\");\r\nObject.defineProperty(exports, \"genMask\", { enumerable: true, get: function () { return __importDefault(genMask_1).default; } });\r\nvar jsis_1 = require(\"./jsis\");\r\nObject.defineProperty(exports, \"jsis\", { enumerable: true, get: function () { return __importDefault(jsis_1).default; } });\r\nvar HVPont_1 = require(\"./HVPont\");\r\nObject.defineProperty(exports, \"HVPont\", { enumerable: true, get: function () { return __importDefault(HVPont_1).default; } });\r\nvar MoveHelper_1 = require(\"./MoveHelper\");\r\nObject.defineProperty(exports, \"MoveHelper\", { enumerable: true, get: function () { return __importDefault(MoveHelper_1).default; } });\r\n__exportStar(require(\"./constant\"), exports);\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar jsis = {\r\n    isValid: function (v) {\r\n        return !this.isNull(v) && !this.isUndefined(v);\r\n    },\r\n    isNull: function (v) {\r\n        return v === null;\r\n    },\r\n    isUndefined: function (v) {\r\n        return typeof v === 'undefined';\r\n    },\r\n    isString: function (str) {\r\n        return this.isValid(str) && typeof str === 'string';\r\n    },\r\n    isNotEmpty: function (str) {\r\n        // eslint-disable-next-line eqeqeq\r\n        return this.isValidString(str) && str != '';\r\n    },\r\n    isNumber: function (n) {\r\n        return this.isValid(n) && typeof n === 'number';\r\n    },\r\n    isStringNumber: function (n) {\r\n        // eslint-disable-next-line eqeqeq\r\n        return this.isString(n) && n != '' && !isNaN(Number(n));\r\n    },\r\n    isArray: function (arr) {\r\n        return this.isValid(arr) && arr instanceof Array;\r\n    },\r\n    isFunction: function (f) {\r\n        return this.isValid(f) && typeof f === 'function';\r\n    },\r\n    isObject: function (o) {\r\n        return this.isValid(o) && o instanceof Object;\r\n    },\r\n    isBoolean: function (b) {\r\n        return this.isValid(b) && typeof b === 'boolean';\r\n    },\r\n    isTrue: function (b) {\r\n        return this.isValidBoolean(b) && b;\r\n    },\r\n    isFalse: function (b) {\r\n        return this.isValidBoolean(b) && !b;\r\n    },\r\n    isPoint: function (p) {\r\n        var isPoint = this.isValid(p) &&\r\n            this.isValidObject(p) &&\r\n            this.isValidNumber(p.x) &&\r\n            this.isValidNumber(p.y);\r\n        return isPoint;\r\n    },\r\n    isSize: function (size) {\r\n        var isSize = this.isValid(size) &&\r\n            this.isValidObject(size) &&\r\n            this.isValidNumber(size.width) &&\r\n            this.isValidNumber(size.height);\r\n        return isSize;\r\n    },\r\n    isOdd: function (n) {\r\n        return !!(n % 2);\r\n    },\r\n    isEven: function (n) {\r\n        return !this.isOdd(n);\r\n    },\r\n    isUpperCase: function (str) {\r\n        return str === str.toUpperCase();\r\n    },\r\n};\r\nexports.default = jsis;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=jsis.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.KhmerChess = void 0;\r\n__exportStar(require(\"./brain\"), exports);\r\n__exportStar(require(\"./kpgn\"), exports);\r\n__exportStar(require(\"./ren\"), exports);\r\n__exportStar(require(\"./other\"), exports);\r\nvar KhmerChess_1 = require(\"./KhmerChess\");\r\nObject.defineProperty(exports, \"KhmerChess\", { enumerable: true, get: function () { return __importDefault(KhmerChess_1).default; } });\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.khmerChessNS = exports.KhmerChess = void 0;\r\nvar KhmerChess_1 = require(\"./KhmerChess\");\r\nObject.defineProperty(exports, \"KhmerChess\", { enumerable: true, get: function () { return __importDefault(KhmerChess_1).default; } });\r\nexports.khmerChessNS = __importStar(require(\"./index\"));\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.umd.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Captured = /** @class */ (function () {\r\n    function Captured(_a) {\r\n        var piece = _a.piece, fromBoardPoint = _a.fromBoardPoint, toGraveyardPoint = _a.toGraveyardPoint;\r\n        this.piece = piece;\r\n        this.fromBoardPoint = fromBoardPoint;\r\n        this.toGraveyardPoint = toGraveyardPoint;\r\n    }\r\n    return Captured;\r\n}());\r\nexports.default = Captured;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Captured.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar REN_1 = __importDefault(require(\"../ren/REN\"));\r\nvar Move_1 = __importDefault(require(\"./Move\"));\r\nvar Player_1 = __importDefault(require(\"./Player\"));\r\nvar Result_1 = __importDefault(require(\"./Result\"));\r\nvar Timer_1 = __importDefault(require(\"./Timer\"));\r\nvar base64Helper_1 = __importDefault(require(\"../other/base64Helper\"));\r\nvar KPGN = /** @class */ (function () {\r\n    function KPGN(ren) {\r\n        this.event = '';\r\n        this.date = null;\r\n        this.location = '';\r\n        this.players = {\r\n            white: new Player_1.default({}),\r\n            black: new Player_1.default({}),\r\n        };\r\n        this.result = {\r\n            last: {\r\n                whiteWin: false,\r\n                blackWin: false,\r\n            },\r\n            white: new Result_1.default({}),\r\n        };\r\n        this.timer = new Timer_1.default({});\r\n        this.ren = ren;\r\n        this.moves = [];\r\n    }\r\n    Object.defineProperty(KPGN.prototype, \"isCanMoveNext\", {\r\n        get: function () {\r\n            var _a;\r\n            return ((_a = this.latestMove) === null || _a === void 0 ? void 0 : _a.isCanMoveNext) && this.ren.isCanMoveNext;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(KPGN.prototype, \"latestMove\", {\r\n        get: function () {\r\n            return this.moves[this.moves.length - 1] || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    KPGN.prototype.addMove = function (move) {\r\n        if (move) {\r\n            this.moves.push(move);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    KPGN.prototype.getMove = function (index) {\r\n        return this.moves[index] || null;\r\n    };\r\n    KPGN.prototype.loadRENStr = function (renStr) {\r\n        this.ren = REN_1.default.fromString(renStr);\r\n        if (this.latestMove) {\r\n            this.ren.syncWithMove(this.latestMove);\r\n        }\r\n    };\r\n    KPGN.prototype.loadMovesStrings = function (moves) {\r\n        var currentRen = this.ren;\r\n        this.moves = moves.reverse().map(function (moveStr) {\r\n            var move = Move_1.default.fromString(moveStr, currentRen);\r\n            if (move === null) {\r\n                throw new Error('Invalid move string');\r\n            }\r\n            currentRen = currentRen.backRen(move);\r\n            return move;\r\n        }).reverse();\r\n        if (this.latestMove) {\r\n            this.ren.syncWithMove(this.latestMove);\r\n        }\r\n    };\r\n    KPGN.prototype.fromJson = function (option) {\r\n        try {\r\n            var ren = option.ren, moves = option.moves, timer = option.timer, result = option.result, players = option.players, location = option.location, date = option.date, event = option.event;\r\n            this.event = event || this.event;\r\n            this.date = date ? new Date(date) : this.date;\r\n            this.location = location || this.location;\r\n            if (players) {\r\n                this.players = {\r\n                    white: new Player_1.default(players.white),\r\n                    black: new Player_1.default(players.black),\r\n                };\r\n            }\r\n            if (result) {\r\n                this.result = {\r\n                    last: result.last,\r\n                    white: new Result_1.default(result.white),\r\n                };\r\n            }\r\n            this.ren = REN_1.default.fromString(ren || '');\r\n            this.loadMovesStrings(moves || []);\r\n            this.timer = new Timer_1.default(timer || {});\r\n            return true;\r\n        }\r\n        catch (error) {\r\n            console.log(error);\r\n            return false;\r\n        }\r\n    };\r\n    KPGN.prototype.toJson = function () {\r\n        var renStr = this.ren.toString();\r\n        if (this.latestMove) {\r\n            renStr = this.latestMove.renStr;\r\n        }\r\n        return {\r\n            event: this.event,\r\n            date: this.date ? this.date.toString() : '',\r\n            location: this.location,\r\n            players: {\r\n                white: this.players.white.toJson(),\r\n                black: this.players.black.toJson(),\r\n            },\r\n            result: {\r\n                last: {\r\n                    whiteWin: this.result.last.whiteWin,\r\n                    blackWin: this.result.last.blackWin,\r\n                },\r\n                white: this.result.white.toJson(),\r\n            },\r\n            timer: this.timer.toJson(),\r\n            moves: this.moves.map(function (m) { return m.toString(); }),\r\n            ren: renStr,\r\n        };\r\n    };\r\n    KPGN.prototype.fromBase64 = function (str) {\r\n        var json = JSON.parse(base64Helper_1.default.decode(str));\r\n        return this.fromJson(json);\r\n    };\r\n    KPGN.prototype.toBase64 = function () {\r\n        var jsStr = JSON.stringify(this.toJson());\r\n        return base64Helper_1.default.encode(jsStr);\r\n    };\r\n    return KPGN;\r\n}());\r\nexports.default = KPGN;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=KPGN.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar brain_1 = require(\"../brain\");\r\nvar ren_1 = require(\"../ren\");\r\nvar constant_1 = require(\"../ren/constant\");\r\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\r\nvar Point_1 = __importDefault(require(\"../ren/Point\"));\r\nvar Captured_1 = __importDefault(require(\"./Captured\"));\r\nvar Move = /** @class */ (function () {\r\n    function Move(_a) {\r\n        var piece = _a.piece, moveFrom = _a.moveFrom, moveTo = _a.moveTo, isUpgrading = _a.isUpgrading, captured = _a.captured;\r\n        this.boardStatus = {\r\n            attacker: null,\r\n            winColor: null,\r\n            stuckColor: null,\r\n            drawCountColor: null,\r\n        };\r\n        this.isStartCounting = false;\r\n        this.piece = piece;\r\n        this.moveFrom = moveFrom;\r\n        this.moveTo = moveTo;\r\n        this.isUpgrading = !!isUpgrading;\r\n        this.captured = captured || null;\r\n        if (brain_1.boardHelper.isUpgradable(piece, moveTo)) {\r\n            this.isUpgrading = true;\r\n            piece.upgrade();\r\n        }\r\n        this.kqJumping = new ren_1.KqJumped();\r\n    }\r\n    Move.prototype.setRen = function (ren) {\r\n        ren.checkBoardStatus(this);\r\n        ren.kqJumped.checkKQMoved(this);\r\n        ren.checkCountStatus(this);\r\n    };\r\n    Move.prototype.syncRen = function (ren) {\r\n        this.renStr = ren.toString();\r\n    };\r\n    Object.defineProperty(Move.prototype, \"isCanMoveNext\", {\r\n        get: function () {\r\n            return !(this.boardStatus.drawCountColor || this.boardStatus.winColor || this.boardStatus.stuckColor);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isWhiteKingJumping\", {\r\n        get: function () {\r\n            return !!this.kqJumping.whiteKing;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isWhiteQueenJumping\", {\r\n        get: function () {\r\n            return !!this.kqJumping.whiteQueen;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isBlackKingJumping\", {\r\n        get: function () {\r\n            return !!this.kqJumping.blackKing;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isBlackQueenJumping\", {\r\n        get: function () {\r\n            return !!this.kqJumping.blackQueen;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"attacker\", {\r\n        get: function () {\r\n            return this.boardStatus.attacker || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"winColor\", {\r\n        get: function () {\r\n            return this.boardStatus.winColor || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"stuckColor\", {\r\n        get: function () {\r\n            return this.boardStatus.stuckColor || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"drawCountColor\", {\r\n        get: function () {\r\n            return this.boardStatus.drawCountColor || null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isDraw\", {\r\n        get: function () {\r\n            return this.stuckColor || this.drawCountColor;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Move.prototype, \"isGameOver\", {\r\n        get: function () {\r\n            return this.winColor || this.isDraw;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Move.fromString = function (str, ren) {\r\n        var piece = Piece_1.default.fromCharCode(str[0]);\r\n        if (piece === null) {\r\n            return null;\r\n        }\r\n        var moveFrom = Point_1.default.fromIndexCode(str.substr(1, 2));\r\n        var moveTo = Point_1.default.fromIndexCode(str.substr(3, 2));\r\n        var move = new Move({\r\n            piece: piece,\r\n            moveFrom: moveFrom,\r\n            moveTo: moveTo,\r\n        });\r\n        var killIndex = str.indexOf(constant_1.PIECE_FLAG_KILL);\r\n        if (!!~killIndex) {\r\n            var match = str.substr(killIndex + 1).match(/^(\\d+)/);\r\n            if (match === null) {\r\n                return null;\r\n            }\r\n            var gyIndex = Number(match[1]);\r\n            var capturedPiece = ren.graveyard.get(gyIndex);\r\n            if (!capturedPiece) {\r\n                throw new Error('Invalid captured index');\r\n            }\r\n            move.captured = new Captured_1.default({\r\n                fromBoardPoint: moveTo,\r\n                toGraveyardPoint: Point_1.default.fromIndexGraveyardIndex(gyIndex),\r\n                piece: capturedPiece,\r\n            });\r\n        }\r\n        var jumpingIndex = str.indexOf(constant_1.PIECE_FLAG_JUMP);\r\n        if (!!~jumpingIndex) {\r\n            var match = str.substr(jumpingIndex + 1).match(/^(\\d+)/);\r\n            if (match === null) {\r\n                return null;\r\n            }\r\n            var n = Number(match[1]);\r\n            move.kqJumping = ren_1.KqJumped.fromNumber(n);\r\n        }\r\n        var startCountingIndex = str.indexOf(constant_1.PIECE_FLAG_START_COUNTING);\r\n        if (!!~startCountingIndex) {\r\n            move.isStartCounting = true;\r\n        }\r\n        move.setRen(ren);\r\n        return move;\r\n    };\r\n    Move.prototype.toString = function () {\r\n        var pCode = this.piece.pieceCharCode;\r\n        var fIndexCode = this.moveFrom.indexCode;\r\n        var tIndexCode = this.moveTo.indexCode;\r\n        var flags = '';\r\n        if (this.captured) {\r\n            flags += constant_1.PIECE_FLAG_KILL + this.captured.toGraveyardPoint.index;\r\n        }\r\n        if (this.kqJumping.isJumped) {\r\n            flags += constant_1.PIECE_FLAG_JUMP + this.kqJumping.toNumber();\r\n        }\r\n        if (this.isUpgrading) {\r\n            flags += constant_1.PIECE_FLAG_UPGRADE;\r\n        }\r\n        if (this.isStartCounting) {\r\n            flags += constant_1.PIECE_FLAG_START_COUNTING;\r\n        }\r\n        return \"\" + pCode + fIndexCode + tIndexCode + flags;\r\n    };\r\n    Move.prototype.getJumpingMessage = function (isEnglish) {\r\n        var jump = '';\r\n        if (isEnglish) {\r\n            if (this.isWhiteKingJumping) {\r\n                jump += ' white king jumping';\r\n            }\r\n            if (this.isWhiteQueenJumping) {\r\n                jump += ' white queen jumping';\r\n            }\r\n            if (this.isBlackKingJumping) {\r\n                jump += ' black king jumping';\r\n            }\r\n            if (this.isBlackQueenJumping) {\r\n                jump += ' black queen jumping';\r\n            }\r\n        }\r\n        else {\r\n            if (this.isWhiteKingJumping) {\r\n                jump += ' ស្តេច​ស​ភ្លោះ';\r\n            }\r\n            if (this.isWhiteQueenJumping) {\r\n                jump += ' នាង​ស​ភ្លោះ';\r\n            }\r\n            if (this.isBlackKingJumping) {\r\n                jump += ' ស្តេច​ខ្មៅ​ភ្លោះ';\r\n            }\r\n            if (this.isBlackQueenJumping) {\r\n                jump += ' នាង​ខ្មៅ​ភ្លោះ';\r\n            }\r\n        }\r\n        return jump;\r\n    };\r\n    Move.prototype.getMessage = function (isEnglish) {\r\n        if (isEnglish) {\r\n            var captured = '';\r\n            if (this.captured) {\r\n                captured = \" captures \" + this.captured.piece.titleEnglish;\r\n            }\r\n            var upgrade = this.isUpgrading ? ' transforms' : '';\r\n            var jump = this.getJumpingMessage(isEnglish);\r\n            return this.piece.titleEnglish + \" moved from \" + this.moveFrom.titleEnglish + \" to \" + this.moveTo.titleEnglish + upgrade + captured + \" \" + jump;\r\n        }\r\n        else {\r\n            var captured = '';\r\n            if (this.captured) {\r\n                captured = \" \\u179F\\u17CA\\u17B8\" + this.captured.piece.title;\r\n            }\r\n            var upgrade = this.isUpgrading ? ' បក' : '';\r\n            var jump = this.getJumpingMessage(isEnglish);\r\n            return this.piece.title + \" \\u178A\\u17BE\\u179A\\u200B\\u1796\\u17B8 \" + this.moveFrom.title + \" \\u1791\\u17C5 \" + this.moveTo.title + upgrade + captured + \" \" + jump;\r\n        }\r\n    };\r\n    return Move;\r\n}());\r\nexports.default = Move;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Move.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Player = /** @class */ (function () {\r\n    function Player(_a) {\r\n        var id = _a.id, name = _a.name;\r\n        this.id = id || '';\r\n        this.name = name || '';\r\n    }\r\n    Player.prototype.toJson = function () {\r\n        return {\r\n            id: this.id,\r\n            name: this.name,\r\n        };\r\n    };\r\n    return Player;\r\n}());\r\nexports.default = Player;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Player.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Result = /** @class */ (function () {\r\n    function Result(_a) {\r\n        var win = _a.win, draw = _a.draw, lost = _a.lost;\r\n        this.win = win || 0;\r\n        this.draw = draw || 0;\r\n        this.lost = lost || 0;\r\n    }\r\n    Result.prototype.toJson = function () {\r\n        return {\r\n            win: this.win,\r\n            draw: this.draw,\r\n            lost: this.lost,\r\n        };\r\n    };\r\n    return Result;\r\n}());\r\nexports.default = Result;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Result.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Timer = /** @class */ (function () {\r\n    function Timer(_a) {\r\n        var totalSecond = _a.totalSecond, bonusTime = _a.bonusTime, currentWhite = _a.currentWhite, currentBlack = _a.currentBlack;\r\n        this.bonusTime = bonusTime || 0;\r\n        this.totalSecond = totalSecond || 0;\r\n        this.currentWhite = currentWhite || 0;\r\n        this.currentBlack = currentBlack || 0;\r\n    }\r\n    Timer.prototype.fromJson = function () {\r\n    };\r\n    Timer.prototype.toJson = function () {\r\n        return {\r\n            totalSecond: this.totalSecond,\r\n            bonusTime: this.bonusTime,\r\n            currentWhite: this.currentWhite,\r\n            currentBlack: this.currentBlack,\r\n        };\r\n    };\r\n    return Timer;\r\n}());\r\nexports.default = Timer;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Timer.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Timer = exports.Result = exports.Player = exports.Captured = exports.Move = exports.KPGN = void 0;\r\nvar KPGN_1 = require(\"./KPGN\");\r\nObject.defineProperty(exports, \"KPGN\", { enumerable: true, get: function () { return __importDefault(KPGN_1).default; } });\r\nvar Move_1 = require(\"./Move\");\r\nObject.defineProperty(exports, \"Move\", { enumerable: true, get: function () { return __importDefault(Move_1).default; } });\r\nvar Captured_1 = require(\"./Captured\");\r\nObject.defineProperty(exports, \"Captured\", { enumerable: true, get: function () { return __importDefault(Captured_1).default; } });\r\nvar Player_1 = require(\"./Player\");\r\nObject.defineProperty(exports, \"Player\", { enumerable: true, get: function () { return __importDefault(Player_1).default; } });\r\nvar Result_1 = require(\"./Result\");\r\nObject.defineProperty(exports, \"Result\", { enumerable: true, get: function () { return __importDefault(Result_1).default; } });\r\nvar Timer_1 = require(\"./Timer\");\r\nObject.defineProperty(exports, \"Timer\", { enumerable: true, get: function () { return __importDefault(Timer_1).default; } });\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar EventHandler = /** @class */ (function () {\r\n    function EventHandler(options) {\r\n        this._onEventListeners = {};\r\n        this._propEvent = [];\r\n        this._onEventListeners = {};\r\n        this._propEvent = [];\r\n        this.events = options.events;\r\n    }\r\n    EventHandler.prototype._checkPropEvent = function () {\r\n        if (this._isLockProp) {\r\n            return;\r\n        }\r\n        while (this._propEvent.length) {\r\n            var event = this._propEvent.shift();\r\n            this._checkOnEvent(event.name, event.data);\r\n        }\r\n    };\r\n    EventHandler.prototype._addPropEvent = function (event, data) {\r\n        this._propEvent.push({\r\n            name: event,\r\n            data: data,\r\n        });\r\n        this._checkPropEvent();\r\n    };\r\n    EventHandler.prototype._guardEventName = function (eventName) {\r\n        if (!eventName) {\r\n            throw new Error('invalid event name');\r\n        }\r\n    };\r\n    EventHandler.prototype._checkOnEvent = function (eventName, data) {\r\n        this._guardEventName(eventName);\r\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\r\n        this._onEventListeners[eventName].forEach(function (listener) {\r\n            listener(data);\r\n        });\r\n    };\r\n    EventHandler.prototype._addOnEventListener = function (eventName, listener) {\r\n        this._guardEventName(eventName);\r\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\r\n        this._onEventListeners[eventName].push(listener);\r\n    };\r\n    EventHandler.prototype._removeOnEventListener = function (eventName, listener) {\r\n        this._guardEventName(eventName);\r\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\r\n        var index = this._onEventListeners[eventName].indexOf(listener);\r\n        ~index && this._onEventListeners[eventName].splice(index, 1);\r\n    };\r\n    return EventHandler;\r\n}());\r\nexports.default = EventHandler;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=EventHandler.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// https://stackoverflow.com/questions/246801/how-can-you-encode-a-string-to-base64-in-javascript\r\n/**\r\n*\r\n*  Base64 encode / decode\r\n*  http://www.webtoolkit.info/\r\n*\r\n**/\r\nvar Base64 = {\r\n    // private property\r\n    _keyStr: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\r\n    // public method for encoding\r\n    encode: function (input) {\r\n        var output = '';\r\n        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n        var i = 0;\r\n        input = Base64._utf8_encode(input);\r\n        while (i < input.length) {\r\n            chr1 = input.charCodeAt(i++);\r\n            chr2 = input.charCodeAt(i++);\r\n            chr3 = input.charCodeAt(i++);\r\n            enc1 = chr1 >> 2;\r\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n            enc4 = chr3 & 63;\r\n            if (isNaN(chr2)) {\r\n                enc3 = enc4 = 64;\r\n            }\r\n            else if (isNaN(chr3)) {\r\n                enc4 = 64;\r\n            }\r\n            output = output +\r\n                this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\r\n                this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\r\n        }\r\n        return output;\r\n    },\r\n    // public method for decoding\r\n    decode: function (input) {\r\n        var output = '';\r\n        var chr1, chr2, chr3;\r\n        var enc1, enc2, enc3, enc4;\r\n        var i = 0;\r\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\r\n        while (i < input.length) {\r\n            enc1 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc2 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc3 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc4 = this._keyStr.indexOf(input.charAt(i++));\r\n            chr1 = (enc1 << 2) | (enc2 >> 4);\r\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n            chr3 = ((enc3 & 3) << 6) | enc4;\r\n            output = output + String.fromCharCode(chr1);\r\n            if (enc3 != 64) {\r\n                output = output + String.fromCharCode(chr2);\r\n            }\r\n            if (enc4 != 64) {\r\n                output = output + String.fromCharCode(chr3);\r\n            }\r\n        }\r\n        output = Base64._utf8_decode(output);\r\n        return output;\r\n    },\r\n    // private method for UTF-8 encoding\r\n    _utf8_encode: function (string) {\r\n        string = string.replace(/\\r\\n/g, '\\n');\r\n        var utftext = '';\r\n        for (var n = 0; n < string.length; n++) {\r\n            var c = string.charCodeAt(n);\r\n            if (c < 128) {\r\n                utftext += String.fromCharCode(c);\r\n            }\r\n            else if ((c > 127) && (c < 2048)) {\r\n                utftext += String.fromCharCode((c >> 6) | 192);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n            else {\r\n                utftext += String.fromCharCode((c >> 12) | 224);\r\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n        }\r\n        return utftext;\r\n    },\r\n    // private method for UTF-8 decoding\r\n    _utf8_decode: function (utftext) {\r\n        var string = '';\r\n        var i = 0;\r\n        var c, c1, c2 = 0;\r\n        c = c1 = c2 = 0;\r\n        while (i < utftext.length) {\r\n            c = utftext.charCodeAt(i);\r\n            if (c < 128) {\r\n                string += String.fromCharCode(c);\r\n                i++;\r\n            }\r\n            else if ((c > 191) && (c < 224)) {\r\n                c1 = utftext.charCodeAt(i + 1);\r\n                string += String.fromCharCode(((c & 31) << 6) | (c1 & 63));\r\n                i += 2;\r\n            }\r\n            else {\r\n                c1 = utftext.charCodeAt(i + 1);\r\n                c2 = utftext.charCodeAt(i + 2);\r\n                string += String.fromCharCode(((c & 15) << 12) | ((c1 & 63) << 6) | (c2 & 63));\r\n                i += 3;\r\n            }\r\n        }\r\n        return string;\r\n    },\r\n};\r\nexports.default = Base64;\r\n//# sourceMappingURL=base64Helper.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.table = exports.EventHandler = void 0;\r\nvar EventHandler_1 = require(\"./EventHandler\");\r\nObject.defineProperty(exports, \"EventHandler\", { enumerable: true, get: function () { return __importDefault(EventHandler_1).default; } });\r\nvar table_1 = require(\"./table\");\r\nObject.defineProperty(exports, \"table\", { enumerable: true, get: function () { return __importDefault(table_1).default; } });\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction asciiTable(ren) {\r\n    var arr = ren.board.piecesMultiArray;\r\n    var str = '  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓';\r\n    var result = arr.reverse().reduce(function (s, subArr, i) {\r\n        var rs = subArr.map(function (p) { return \" \" + (p ? p.pieceCharCode : ' ') + \" \"; }).join('┃');\r\n        var bottom = i === arr.length - 1 ? '┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛' : '┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫';\r\n        s += \"\\n\" + (8 - i) + \" \\u2503\" + rs + \"\\u2503\\n  \" + bottom;\r\n        return s;\r\n    }, str);\r\n    var gyTStr = ren.graveyard.pieces.map(function () { return '━━━'; }).join('┳');\r\n    var gyStr = ren.graveyard.pieces.map(function (p) { return \" \" + (p ? p.pieceCharCode : ' ') + \" \"; }).join('┃');\r\n    var gyBStr = ren.graveyard.pieces.map(function () { return '━━━'; }).join('┻');\r\n    var graveyardStr = \"  \\u250F\" + gyTStr + \"\\u2513\\n  \\u2503\" + gyStr + \"\\u2503\\n  \\u2517\" + gyBStr + \"\\u251B\";\r\n    return result + \"\\n    a   b   c   d   e   f   g   h\\n\" + graveyardStr;\r\n}\r\nexports.default = asciiTable;\r\n/*\r\n  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓\r\n8 ┃   ┃   ┃   ┃   ┃ k ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n7 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n6 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n5 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n4 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n3 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n2 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\r\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\r\n1 ┃   ┃   ┃   ┃ K ┃   ┃   ┃   ┃   ┃\r\n  ┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛\r\n    a   b   c   d   e   f   g   h\r\n  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓\r\n  ┃ b ┃ h ┃ g ┃ q ┃ g ┃ h ┃ b ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ B ┃ H ┃ G ┃ Q ┃ G ┃ H ┃ B ┃\r\n  ┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛\r\n */\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=table.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Piece_1 = __importDefault(require(\"./Piece\"));\r\nvar PieceIndex_1 = __importDefault(require(\"./PieceIndex\"));\r\nvar constant_1 = require(\"./constant\");\r\nvar constant_2 = require(\"../brain/constant\");\r\nvar Point_1 = __importDefault(require(\"./Point\"));\r\n/**\r\n * BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb => bhgqkghb/......../ffffffff/......../......../FFFFFFFF/......../BHGKQGHB\r\n */\r\nvar Board = /** @class */ (function () {\r\n    function Board(boardStr) {\r\n        this.pieceIndices = Array.from({\r\n            length: constant_2.CELL_COUNT,\r\n        }, function (_, i) {\r\n            var point = Point_1.default.fromIndex(i);\r\n            return new PieceIndex_1.default(point, null);\r\n        });\r\n        if (!boardStr) {\r\n            boardStr = constant_1.DEFAULT_BOARD_STR;\r\n        }\r\n        var newBoardStr = this.extract(boardStr).replace(/\\//g, '');\r\n        if (newBoardStr.length < constant_2.CELL_COUNT ||\r\n            !Piece_1.default.isValidPiecesString(newBoardStr)) {\r\n            throw new Error(\"Invalid board string \" + boardStr);\r\n        }\r\n        this.pieceIndices = newBoardStr.split('').map(function (charCode, i) {\r\n            var point = Point_1.default.fromIndex(i);\r\n            return new PieceIndex_1.default(point, charCode === constant_2.EMPTY_PIECE ? null : Piece_1.default.fromCharCode(charCode));\r\n        });\r\n    }\r\n    Object.defineProperty(Board.prototype, \"piecesMultiArray\", {\r\n        get: function () {\r\n            var arr = [[], [], [], [], [], [], [], []];\r\n            this.pieceIndices.forEach(function (pieceIndex) {\r\n                if (pieceIndex.piece !== null) {\r\n                    arr[pieceIndex.point.y][pieceIndex.point.x] = pieceIndex.piece;\r\n                }\r\n            });\r\n            return arr;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Board.prototype, \"pieces\", {\r\n        get: function () {\r\n            return this.pieceIndices.map(function (pieceIndex) {\r\n                return pieceIndex.piece;\r\n            });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Board.prototype, \"whiteKing\", {\r\n        get: function () {\r\n            return this.pieceIndices.find(function (pieceIndex) {\r\n                return pieceIndex.piece && pieceIndex.piece.isTypeKing && pieceIndex.piece.isColorWhite;\r\n            });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Board.prototype, \"blackKing\", {\r\n        get: function () {\r\n            return this.pieceIndices.find(function (pieceIndex) {\r\n                return pieceIndex.piece && pieceIndex.piece.isTypeKing && pieceIndex.piece.isColorBlack;\r\n            });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Board.prototype.getKing = function (color) {\r\n        return Piece_1.default.isWhiteColor(color) ? this.whiteKing : this.blackKing;\r\n    };\r\n    Board.prototype.compress = function (str) {\r\n        var reg = new RegExp(\"(\\\\\" + constant_2.EMPTY_PIECE + \"+)\", 'g');\r\n        return str.replace(reg, function ($1) { return $1.length; });\r\n    };\r\n    Board.prototype.extract = function (str) {\r\n        return str.replace(/(\\d+)/g, function ($1) {\r\n            // $1 == 3 => '...', bh6 => 'bh......'\r\n            return Array.from({\r\n                length: $1,\r\n            }, function () { return constant_2.EMPTY_PIECE; }).join('');\r\n        });\r\n    };\r\n    Board.prototype.toStringFull = function (pieceIndices) {\r\n        if (pieceIndices === void 0) { pieceIndices = this.pieceIndices; }\r\n        var str = pieceIndices.map(function (pieceIndex, i) {\r\n            var p = pieceIndex.toPieceCharCode();\r\n            if (i && i % constant_2.ROW_NUMBER === 0 && i !== constant_2.CELL_COUNT) {\r\n                return \"\" + constant_2.BOARD_SEPARATOR + p;\r\n            }\r\n            return p;\r\n        }).join('');\r\n        return str;\r\n    };\r\n    Board.prototype.toStringFullNoSeparate = function () {\r\n        var str = this.toStringFull();\r\n        str = str.replace(/\\//g, '');\r\n        return str;\r\n    };\r\n    Board.prototype.toString = function (pieceIndices) {\r\n        var str = this.toStringFull(pieceIndices);\r\n        str = this.compress(str);\r\n        return str;\r\n    };\r\n    Board.prototype.getPieceAtIndex = function (index) {\r\n        return this.pieceIndices[index].piece;\r\n    };\r\n    Board.prototype.setPieceAtIndex = function (index, piece) {\r\n        this.pieceIndices[index].piece = piece;\r\n    };\r\n    return Board;\r\n}());\r\nexports.default = Board;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Board.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar brain_1 = require(\"../brain\");\r\nvar constant_1 = require(\"./constant\");\r\n// 23.-\r\nvar CountUp = /** @class */ (function () {\r\n    function CountUp() {\r\n        this.countingToNumber = null;\r\n        this.countingNumber = null;\r\n        this.isCountingUp = false;\r\n        this.color = null;\r\n    }\r\n    Object.defineProperty(CountUp.prototype, \"isWhite\", {\r\n        get: function () {\r\n            return this.color === brain_1.PIECE_COLOR_WHITE;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CountUp.prototype, \"isBlack\", {\r\n        get: function () {\r\n            return this.color === brain_1.PIECE_COLOR_BLACK;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CountUp.prototype, \"isWhiteCounting\", {\r\n        get: function () {\r\n            return this.isCounting && this.isWhite;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CountUp.prototype, \"isBlackCounting\", {\r\n        get: function () {\r\n            return this.isCounting && !this.isWhite;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CountUp.prototype, \"isCounting\", {\r\n        get: function () {\r\n            return this.countingToNumber !== null;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CountUp.prototype, \"isCountingOut\", {\r\n        get: function () {\r\n            if (!this.isCounting || this.countingNumber === null ||\r\n                this.countingToNumber === null) {\r\n                return false;\r\n            }\r\n            return this.countingNumber >= this.countingToNumber;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CountUp.prototype.set = function (color, countingToNumber, countingNumber) {\r\n        this.color = color;\r\n        this.countingToNumber = countingToNumber;\r\n        this.countingNumber = countingNumber;\r\n    };\r\n    CountUp.prototype.clear = function () {\r\n        this.color = null;\r\n        this.countingToNumber = null;\r\n        this.countingNumber = null;\r\n    };\r\n    CountUp.prototype.checkUp = function (color) {\r\n        if (this.countingNumber !== null && color === this.color) {\r\n            this.countingNumber++;\r\n            this.isCountingUp = true;\r\n        }\r\n        else {\r\n            this.isCountingUp = false;\r\n        }\r\n    };\r\n    CountUp.fromString = function (countUpStr) {\r\n        if (!countUpStr) {\r\n            countUpStr = constant_1.NOT_SET + \".\" + constant_1.NOT_SET + \"@\" + constant_1.NOT_SET;\r\n        }\r\n        var countUp = new CountUp();\r\n        var countingUp = countUpStr.split('@');\r\n        if (countingUp[1] !== constant_1.NOT_SET) {\r\n            countUp.countingToNumber = Number(countingUp[1]);\r\n        }\r\n        var countingUpWB = countingUp[0].split('.');\r\n        if (countingUpWB[0] !== constant_1.NOT_SET) {\r\n            countUp.color = brain_1.PIECE_COLOR_WHITE;\r\n            countUp.countingNumber = Number(countingUpWB[0]);\r\n        }\r\n        if (countingUpWB[1] !== constant_1.NOT_SET) {\r\n            countUp.color = brain_1.PIECE_COLOR_BLACK;\r\n            countUp.countingNumber = Number(countingUpWB[1]);\r\n        }\r\n        return countUp;\r\n    };\r\n    CountUp.prototype.toString = function () {\r\n        var whiteCountingDow = this.isCounting && this.isWhite ? this.countingNumber : constant_1.NOT_SET;\r\n        var blackCountingDow = this.isCounting && !this.isWhite ? this.countingNumber : constant_1.NOT_SET;\r\n        var str = \"\" + whiteCountingDow;\r\n        str += \".\" + blackCountingDow;\r\n        str += \"@\" + (this.isCounting ? this.countingToNumber : constant_1.NOT_SET);\r\n        return str;\r\n    };\r\n    return CountUp;\r\n}());\r\nexports.default = CountUp;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=CountUp.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Piece_1 = __importDefault(require(\"./Piece\"));\r\nvar Graveyard = /** @class */ (function () {\r\n    function Graveyard(graveyardStr) {\r\n        this.pieces = [];\r\n        if (graveyardStr) {\r\n            if (graveyardStr.length > 30 ||\r\n                !Piece_1.default.isValidPiecesString(graveyardStr, true)) {\r\n                throw new Error(\"Invalid graveyard string \" + graveyardStr);\r\n            }\r\n            this.pieces = graveyardStr.split('').map(function (charCode, i) {\r\n                var p = Piece_1.default.fromCharCode(charCode);\r\n                return p;\r\n            }).filter(function (piece) {\r\n                return piece !== null;\r\n            });\r\n        }\r\n    }\r\n    Object.defineProperty(Graveyard.prototype, \"lastIndex\", {\r\n        get: function () {\r\n            return this.pieces.length - 1;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Graveyard.prototype.get = function (index) {\r\n        return this.pieces[index];\r\n    };\r\n    Graveyard.prototype.removeAtIndex = function (index) {\r\n        if (!!this.get(index)) {\r\n            this.pieces.splice(index, 1);\r\n        }\r\n        return true;\r\n    };\r\n    Graveyard.prototype.toString = function () {\r\n        return this.pieces.map(function (p) {\r\n            return p.pieceCharCode;\r\n        }).join('');\r\n    };\r\n    return Graveyard;\r\n}());\r\nexports.default = Graveyard;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Graveyard.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"../brain/constant\");\r\nvar constant_2 = require(\"./constant\");\r\nvar Piece_1 = __importDefault(require(\"./Piece\"));\r\n/**\r\n * King has attacked, this will effect jumping\r\n */\r\nvar KAttacked = /** @class */ (function () {\r\n    function KAttacked(kAttackedStr) {\r\n        this.whiteKing = false;\r\n        this.blackKing = false;\r\n        if (kAttackedStr) {\r\n            this.whiteKing = !!~kAttackedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING));\r\n            this.blackKing = !!~kAttackedStr.indexOf(constant_1.PIECE_TYPE_KING);\r\n        }\r\n    }\r\n    KAttacked.prototype.toString = function () {\r\n        var str = \"\" + (this.whiteKing ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING) : constant_2.NOT_SET);\r\n        str += \"\" + (this.blackKing ? constant_1.PIECE_TYPE_KING : constant_2.NOT_SET);\r\n        return str;\r\n    };\r\n    return KAttacked;\r\n}());\r\nexports.default = KAttacked;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=KAttacked.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"../brain/constant\");\r\nvar constant_2 = require(\"./constant\");\r\nvar Piece_1 = __importDefault(require(\"./Piece\"));\r\n/**\r\n * King or Queen has jumped, the will effect jumping\r\n */\r\nvar KqJumped = /** @class */ (function () {\r\n    function KqJumped(kqJumpedStr) {\r\n        var _a;\r\n        this.whiteKing = false;\r\n        this.whiteQueen = false;\r\n        this.blackKing = false;\r\n        this.blackQueen = false;\r\n        this.keyCodes = {\r\n            blackKing: Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN),\r\n            whiteKing: Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING),\r\n            whiteQueen: constant_1.PIECE_TYPE_KING,\r\n            blackQueen: constant_1.PIECE_TYPE_QUEEN,\r\n        };\r\n        this.codeKeys = (_a = {},\r\n            _a[Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN)] = 'blackKing: ',\r\n            _a[Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING)] = 'whiteKing: ',\r\n            _a[constant_1.PIECE_TYPE_KING] = 'whiteQueen: ',\r\n            _a[constant_1.PIECE_TYPE_QUEEN] = 'blackQueen: ',\r\n            _a);\r\n        if (kqJumpedStr) {\r\n            this.whiteKing = !!~kqJumpedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING));\r\n            this.whiteQueen = !!~kqJumpedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN));\r\n            this.blackKing = !!~kqJumpedStr.indexOf(constant_1.PIECE_TYPE_KING);\r\n            this.blackQueen = !!~kqJumpedStr.indexOf(constant_1.PIECE_TYPE_QUEEN);\r\n        }\r\n    }\r\n    Object.defineProperty(KqJumped.prototype, \"isJumped\", {\r\n        get: function () {\r\n            return this.whiteKing || this.whiteQueen || this.blackKing || this.blackQueen;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    KqJumped.prototype.setProp = function (key, value) {\r\n        this[key] = value;\r\n    };\r\n    KqJumped.prototype.applyJumping = function (propKey, move) {\r\n        if (!this[propKey]) {\r\n            move.kqJumping.setProp(propKey, true);\r\n            this.setProp(propKey, true);\r\n        }\r\n    };\r\n    KqJumped.prototype.checkKQMoved = function (move) {\r\n        if (move.attacker || move.captured) {\r\n            this.applyJumping('whiteKing', move);\r\n            this.applyJumping('blackKing', move);\r\n            this.applyJumping('whiteQueen', move);\r\n            this.applyJumping('blackQueen', move);\r\n        }\r\n        var piece = move.piece;\r\n        if (piece.isTypeKing) {\r\n            if (piece.isColorWhite) {\r\n                this.applyJumping('whiteKing', move);\r\n            }\r\n            else {\r\n                this.applyJumping('blackKing', move);\r\n            }\r\n        }\r\n        else if (piece.isTypeQueen) {\r\n            if (piece.isColorWhite) {\r\n                this.applyJumping('whiteQueen', move);\r\n            }\r\n            else {\r\n                this.applyJumping('blackQueen', move);\r\n            }\r\n        }\r\n    };\r\n    KqJumped.prototype.toString = function () {\r\n        var str = \"\" + (this.whiteKing ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING) : constant_2.NOT_SET);\r\n        str += \"\" + (this.whiteQueen ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN) : constant_2.NOT_SET);\r\n        str += \"\" + (this.blackKing ? constant_1.PIECE_TYPE_KING : constant_2.NOT_SET);\r\n        str += \"\" + (this.blackQueen ? constant_1.PIECE_TYPE_QUEEN : constant_2.NOT_SET);\r\n        return str;\r\n    };\r\n    KqJumped.prototype.toNumber = function () {\r\n        var str = \"\" + (this.whiteKing ? 1 : 0);\r\n        str += \"\" + (this.whiteQueen ? 1 : 0);\r\n        str += \"\" + (this.blackKing ? 1 : 0);\r\n        str += \"\" + (this.blackQueen ? 1 : 0);\r\n        return parseInt(str, 2);\r\n    };\r\n    KqJumped.fromNumber = function (n) {\r\n        var b = ('0000' + Number(n).toString(2)).substr(-4);\r\n        var kqJumped = new KqJumped();\r\n        kqJumped.whiteKing = b[0] === '1';\r\n        kqJumped.whiteQueen = b[1] === '1';\r\n        kqJumped.blackKing = b[2] === '1';\r\n        kqJumped.blackQueen = b[3] === '1';\r\n        return kqJumped;\r\n    };\r\n    return KqJumped;\r\n}());\r\nexports.default = KqJumped;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=KqJumped.js.map","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"../brain/constant\");\r\nvar jsis_1 = __importDefault(require(\"../brain/jsis\"));\r\nvar Piece = /** @class */ (function () {\r\n    function Piece(type, color) {\r\n        this.type = Piece.toNormalCharCode(type);\r\n        this.color = color;\r\n    }\r\n    Object.defineProperty(Piece.prototype, \"colorOpponent\", {\r\n        get: function () {\r\n            return Piece.oppositeColor(this.color);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"pieceCharCode\", {\r\n        get: function () {\r\n            if (this.isColorWhite) {\r\n                return this.pieceCharCodeWhite;\r\n            }\r\n            return this.type;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"pieceCharCodeWhite\", {\r\n        get: function () {\r\n            return Piece.toWhiteCharCode(this.type);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"title\", {\r\n        get: function () {\r\n            return \"\" + constant_1.PIECE_NAMES[this.type] + constant_1.COLOR_NAMES[this.color];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"titleEnglish\", {\r\n        get: function () {\r\n            return constant_1.COLOR_NAMES_ENGLISH[this.color] + \"-\" + constant_1.PIECE_NAMES_ENGLISH[this.type];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Piece.prototype._isTypeEqual = function (type) {\r\n        return this.type === type;\r\n    };\r\n    Object.defineProperty(Piece.prototype, \"isTypeKing\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_KING);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeQueen\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_QUEEN);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeBoat\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_BOAT);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeHorse\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_HORSE);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeGeneral\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_GENERAL);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeFish\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_FISH);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isTypeTransformedFish\", {\r\n        get: function () {\r\n            return this._isTypeEqual(constant_1.PIECE_TYPE_TRANSFORM_FISH);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isColorBlack\", {\r\n        get: function () {\r\n            return Piece.isBlackColor(this.color);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece.prototype, \"isColorWhite\", {\r\n        get: function () {\r\n            return Piece.isWhiteColor(this.color);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Piece.fromCharCode = function (charCode) {\r\n        if (!Piece.isValidPiece(charCode)) {\r\n            return null;\r\n        }\r\n        var color = Piece.isWhiteCharCode(charCode) ? constant_1.PIECE_COLOR_WHITE : constant_1.PIECE_COLOR_BLACK;\r\n        var type = Piece.toNormalCharCode(charCode);\r\n        return new Piece(type, color);\r\n    };\r\n    Object.defineProperty(Piece.prototype, \"originPiece\", {\r\n        get: function () {\r\n            if (this.isTypeTransformedFish) {\r\n                return new Piece(constant_1.PIECE_TYPE_FISH, this.color);\r\n            }\r\n            return this;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece, \"pieceChars\", {\r\n        get: function () {\r\n            return [\r\n                constant_1.PIECE_TYPE_BOAT,\r\n                constant_1.PIECE_TYPE_HORSE,\r\n                constant_1.PIECE_TYPE_GENERAL,\r\n                constant_1.PIECE_TYPE_KING,\r\n                constant_1.PIECE_TYPE_QUEEN,\r\n                constant_1.PIECE_TYPE_FISH,\r\n                constant_1.PIECE_TYPE_TRANSFORM_FISH,\r\n            ];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Piece, \"colorChars\", {\r\n        get: function () {\r\n            return [\r\n                constant_1.PIECE_COLOR_WHITE,\r\n                constant_1.PIECE_COLOR_BLACK,\r\n            ];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Piece.toWhiteCharCode = function (charCode) {\r\n        return charCode.toUpperCase();\r\n    };\r\n    Piece.isWhiteCharCode = function (charCode) {\r\n        return jsis_1.default.isUpperCase(charCode);\r\n    };\r\n    Piece.toBlackCharCode = function (charCode) {\r\n        return charCode.toLowerCase();\r\n    };\r\n    Piece.toNormalCharCode = function (charCode) {\r\n        return Piece.toBlackCharCode(charCode);\r\n    };\r\n    Piece.isValidPiece = function (charCode) {\r\n        return charCode !== constant_1.EMPTY_PIECE;\r\n    };\r\n    Piece.isWhiteColor = function (color) {\r\n        return color === constant_1.PIECE_COLOR_WHITE;\r\n    };\r\n    Piece.isBlackColor = function (color) {\r\n        return color === constant_1.PIECE_COLOR_BLACK;\r\n    };\r\n    Piece.oppositeColor = function (color) {\r\n        return Piece.isWhiteColor(color) ? constant_1.PIECE_COLOR_BLACK : constant_1.PIECE_COLOR_WHITE;\r\n    };\r\n    Piece.isValidPiecesString = function (str, onlyPiece) {\r\n        var ruler = onlyPiece ? allPiecesString.filter(function (c) {\r\n            return !~[constant_1.EMPTY_PIECE, constant_1.BOARD_SEPARATOR].indexOf(c);\r\n        }) : allPiecesString;\r\n        return !str.split('').some(function (c) {\r\n            return !~ruler.indexOf(c);\r\n        });\r\n    };\r\n    Piece.prototype.upgrade = function () {\r\n        if (this.isTypeFish) {\r\n            this.type = constant_1.PIECE_TYPE_TRANSFORM_FISH;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Piece.prototype.downgrade = function () {\r\n        if (this.isTypeTransformedFish) {\r\n            this.type = constant_1.PIECE_TYPE_FISH;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Piece.prototype.clone = function () {\r\n        return Piece.fromCharCode(this.pieceCharCode);\r\n    };\r\n    return Piece;\r\n}());\r\nexports.default = Piece;\r\nvar allPiecesString = __spreadArray(__spreadArray(__spreadArray([], Piece.pieceChars, true), Piece.pieceChars.map(function (pieceChar) {\r\n    return Piece.toWhiteCharCode(pieceChar);\r\n}), true), [\r\n    constant_1.EMPTY_PIECE,\r\n    constant_1.BOARD_SEPARATOR,\r\n], false);\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>, K4us Net <k4us.net@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Piece.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"../brain/constant\");\r\nvar PieceIndex = /** @class */ (function () {\r\n    function PieceIndex(point, piece) {\r\n        this.canMovePoints = [];\r\n        this.point = point;\r\n        this.piece = piece;\r\n    }\r\n    PieceIndex.prototype.toCode = function () {\r\n        return this.piece != null ? \"\" + this.piece.pieceCharCode + this.point.indexCode : null;\r\n    };\r\n    PieceIndex.prototype.toPieceCharCode = function () {\r\n        return this.piece !== null ? this.piece.pieceCharCode : constant_1.EMPTY_PIECE;\r\n    };\r\n    return PieceIndex;\r\n}());\r\nexports.default = PieceIndex;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=PieceIndex.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar constant_1 = require(\"../brain/constant\");\r\nvar Point = /** @class */ (function () {\r\n    function Point(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    Object.defineProperty(Point.prototype, \"index\", {\r\n        get: function () {\r\n            return Point.xyToIndex(this.x, this.y);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"graveyardIndex\", {\r\n        get: function () {\r\n            return this.x;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"indexCode\", {\r\n        get: function () {\r\n            return \"\" + this.h + this.v;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"title\", {\r\n        get: function () {\r\n            return \"\" + constant_1.HORIZONTAL_NOTE_LETTERS[this.x] + constant_1.VERTICAL_NOTE_LETTERS[this.y];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"titleEnglish\", {\r\n        get: function () {\r\n            return this.indexCode;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"h\", {\r\n        get: function () {\r\n            return constant_1.HORIZONTAL_CODE_LETTERS[this.x];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Point.prototype, \"v\", {\r\n        get: function () {\r\n            return this.y + 1;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Point.xyToIndex = function (x, y) {\r\n        return y * constant_1.ROW_NUMBER + x;\r\n    };\r\n    Point.indexCodeToXY = function (indexCode) {\r\n        var x = constant_1.HORIZONTAL_CODE_LETTERS.indexOf(indexCode[0]);\r\n        var y = Number(indexCode[1]) - 1;\r\n        return { x: x, y: y };\r\n    };\r\n    Point.indexCodeToIndex = function (indexCode) {\r\n        var _a = Point.indexCodeToXY(indexCode), x = _a.x, y = _a.y;\r\n        return Point.xyToIndex(x, y);\r\n    };\r\n    Point.fromIndexCode = function (indexCode) {\r\n        var _a = Point.indexCodeToXY(indexCode), x = _a.x, y = _a.y;\r\n        return new Point(x, y);\r\n    };\r\n    Point.indexToXY = function (index) {\r\n        var x = index % constant_1.ROW_NUMBER;\r\n        var y = Math.floor(index / constant_1.ROW_NUMBER);\r\n        return { x: x, y: y };\r\n    };\r\n    Point.fromIndex = function (index) {\r\n        var _a = Point.indexToXY(index), x = _a.x, y = _a.y;\r\n        return new Point(x, y);\r\n    };\r\n    Point.fromIndexGraveyardIndex = function (index) {\r\n        return new Point(index, 0);\r\n    };\r\n    Point.isIndexInBoard = function (index) {\r\n        return index >= 0 && index <= constant_1.CELL_COUNT - 1;\r\n    };\r\n    return Point;\r\n}());\r\nexports.default = Point;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=Point.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Board_1 = __importDefault(require(\"./Board\"));\r\nvar KqJumped_1 = __importDefault(require(\"./KqJumped\"));\r\nvar KAttacked_1 = __importDefault(require(\"./KAttacked\"));\r\nvar CountUp_1 = __importDefault(require(\"./CountUp\"));\r\nvar Graveyard_1 = __importDefault(require(\"./Graveyard\"));\r\nvar constant_1 = require(\"./constant\");\r\nvar kpgn_1 = require(\"../kpgn\");\r\nvar Move_1 = __importDefault(require(\"../kpgn/Move\"));\r\nvar Point_1 = __importDefault(require(\"./Point\"));\r\nvar Piece_1 = __importDefault(require(\"./Piece\"));\r\nvar _1 = require(\".\");\r\nvar MoveHelper_1 = __importDefault(require(\"../brain/MoveHelper\"));\r\nvar constant_2 = require(\"../brain/constant\");\r\nvar REN = /** @class */ (function () {\r\n    function REN(renProps) {\r\n        this.moveHelper = new MoveHelper_1.default();\r\n        this.init(renProps);\r\n    }\r\n    REN.prototype.init = function (_a) {\r\n        var boardStr = _a.boardStr, turnStr = _a.turnStr, kqJumpedStr = _a.kqJumpedStr, kAttackedStr = _a.kAttackedStr, countUpStr = _a.countUpStr, graveyardStr = _a.graveyardStr;\r\n        // TODO: improve by moving to fromString()\r\n        this.board = new Board_1.default(boardStr);\r\n        this.turn = turnStr || constant_2.PIECE_COLOR_WHITE;\r\n        this.kqJumped = new KqJumped_1.default(kqJumpedStr);\r\n        this.kAttacked = new KAttacked_1.default(kAttackedStr);\r\n        this.countUp = CountUp_1.default.fromString(countUpStr);\r\n        this.graveyard = new Graveyard_1.default(graveyardStr);\r\n        var invalidPiecesString = this.isInvalidPieceCount();\r\n        if (invalidPiecesString) {\r\n            var msg = \"Invalid piece string board:\" + boardStr;\r\n            msg += \", graveyard:\" + graveyardStr + \", count:\" + invalidPiecesString;\r\n            throw new Error(msg);\r\n        }\r\n        this.moveHelper = new MoveHelper_1.default();\r\n    };\r\n    REN.prototype.isInvalidPieceCount = function () {\r\n        var pieces = this.board.pieceIndices.map(function (pos) {\r\n            return pos.piece;\r\n        }).filter(function (p) {\r\n            return p !== null;\r\n        }).concat(this.graveyard.pieces).map(function (p) {\r\n            return p.originPiece;\r\n        });\r\n        var piecesCount = pieces.reduce(function (obj, p) {\r\n            obj[p.pieceCharCode] = obj[p.pieceCharCode] || 0;\r\n            obj[p.pieceCharCode]++;\r\n            return obj;\r\n        }, {});\r\n        var str = Object.keys(piecesCount).map(function (k) {\r\n            return \"\" + k + piecesCount[k];\r\n        }).sort().join('');\r\n        if (str === constant_1.STRING_COUNT) {\r\n            return false;\r\n        }\r\n        return str;\r\n    };\r\n    REN.prototype.backRen = function (move) {\r\n        var ren = REN.fromString(this.toString());\r\n        ren.moveBack(move);\r\n        return ren;\r\n    };\r\n    Object.defineProperty(REN.prototype, \"isCanMoveNext\", {\r\n        get: function () {\r\n            return !this.countUp.isCountingOut;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    REN.prototype.move = function (moveFromIndex, moveToIndex) {\r\n        if (!this.isCanMoveNext) {\r\n            return null;\r\n        }\r\n        var piece = this.board.getPieceAtIndex(moveFromIndex);\r\n        if (!piece) {\r\n            return null;\r\n        }\r\n        this.board.setPieceAtIndex(moveFromIndex, null);\r\n        var move = new Move_1.default({\r\n            moveFrom: Point_1.default.fromIndex(moveFromIndex),\r\n            moveTo: Point_1.default.fromIndex(moveToIndex),\r\n            piece: piece.clone(),\r\n        });\r\n        if (move.isUpgrading) {\r\n            piece.upgrade();\r\n        }\r\n        var targetPiece = this.board.getPieceAtIndex(moveToIndex);\r\n        if (targetPiece) {\r\n            this.graveyard.pieces.push(targetPiece);\r\n            move.captured = new kpgn_1.Captured({\r\n                fromBoardPoint: Point_1.default.fromIndex(moveToIndex),\r\n                toGraveyardPoint: Point_1.default.fromIndex(this.graveyard.lastIndex),\r\n                piece: targetPiece,\r\n            });\r\n        }\r\n        this.board.setPieceAtIndex(moveToIndex, piece);\r\n        this.turn = Piece_1.default.oppositeColor(piece.color);\r\n        move.setRen(this);\r\n        return move;\r\n    };\r\n    REN.prototype.moveBack = function (move) {\r\n        var movedToIndex = move.moveTo.index;\r\n        var movedFromIndex = move.moveFrom.index;\r\n        var piece = this.board.getPieceAtIndex(movedToIndex);\r\n        this.board.setPieceAtIndex(movedToIndex, null);\r\n        if (!piece) {\r\n            return false;\r\n        }\r\n        this.board.setPieceAtIndex(movedFromIndex, piece);\r\n        if (move.captured) {\r\n            var movedToGYIndex = move.captured.toGraveyardPoint.index;\r\n            var capturedPiece = this.graveyard.get(movedToGYIndex);\r\n            this.board.setPieceAtIndex(movedToIndex, capturedPiece);\r\n            this.graveyard.removeAtIndex(movedToGYIndex);\r\n        }\r\n        if (move.kqJumping.whiteKing) {\r\n            this.kqJumped.whiteKing = false;\r\n        }\r\n        if (move.kqJumping.whiteQueen) {\r\n            this.kqJumped.whiteQueen = false;\r\n        }\r\n        if (move.kqJumping.blackKing) {\r\n            this.kqJumped.blackKing = false;\r\n        }\r\n        if (move.kqJumping.blackQueen) {\r\n            this.kqJumped.blackQueen = false;\r\n        }\r\n        if (this.countUp) {\r\n            this.countUp.clear();\r\n        }\r\n        this.turn = piece.color;\r\n        return true;\r\n    };\r\n    REN.fromString = function (renStr) {\r\n        if (!renStr) {\r\n            renStr = constant_1.DEFAULT_BOARD_STR;\r\n        }\r\n        var renArr = renStr.split(' ');\r\n        return new REN({\r\n            boardStr: renArr[0],\r\n            turnStr: renArr[1],\r\n            kqJumpedStr: renArr[2],\r\n            kAttackedStr: renArr[3],\r\n            countUpStr: renArr[4],\r\n            graveyardStr: renArr[5],\r\n        });\r\n    };\r\n    REN.prototype.toString = function () {\r\n        var str = this.board.toString();\r\n        str += \" \" + this.turn.toString();\r\n        str += \" \" + this.kqJumped.toString();\r\n        str += \" \" + this.kAttacked.toString();\r\n        str += \" \" + this.countUp.toString();\r\n        str += \" \" + this.graveyard.toString();\r\n        return str;\r\n    };\r\n    Object.defineProperty(REN.prototype, \"isQueenMoved\", {\r\n        get: function () {\r\n            var isQueenMoved = Piece_1.default.isWhiteColor(this.turn) && this.kqJumped.whiteQueen ||\r\n                Piece_1.default.isBlackColor(this.turn) && this.kqJumped.blackQueen;\r\n            return isQueenMoved;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(REN.prototype, \"isKingMoved\", {\r\n        get: function () {\r\n            var isKingMoved = Piece_1.default.isWhiteColor(this.turn) && this.kqJumped.whiteKing ||\r\n                Piece_1.default.isBlackColor(this.turn) && this.kqJumped.blackKing;\r\n            return isKingMoved;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    REN.prototype.genAllCanMoves = function () {\r\n        var canMoves = this.moveHelper.calcCanMove({\r\n            piecesString: this.board.toStringFullNoSeparate(),\r\n            currentTurn: this.turn,\r\n            isQueenMoved: this.isQueenMoved,\r\n            isKingMoved: this.isKingMoved,\r\n            genCanMove: true,\r\n            genCanMoveForAnother: false,\r\n        });\r\n        return canMoves.moves;\r\n    };\r\n    REN.prototype.isHasMoved = function (piece) {\r\n        var isHasMoved = false;\r\n        if ((this.kqJumped.blackKing && piece.isColorBlack && piece.isTypeKing) ||\r\n            (this.kqJumped.whiteKing && piece.isColorWhite && piece.isTypeKing) ||\r\n            (this.kqJumped.blackQueen && piece.isColorBlack && piece.isTypeQueen) ||\r\n            (this.kqJumped.whiteQueen && piece.isColorWhite && piece.isTypeQueen)) {\r\n            isHasMoved = true;\r\n        }\r\n        return isHasMoved;\r\n    };\r\n    REN.prototype.getCanMovePointsByPoint = function (point) {\r\n        var piece = this.board.getPieceAtIndex(point.index);\r\n        if (piece === null) {\r\n            return [];\r\n        }\r\n        return this.moveHelper.genCanMovePointsByPiecePoint(point, piece, this.board.toStringFullNoSeparate(), this.isHasMoved(piece));\r\n    };\r\n    REN.prototype.checkBoardStatus = function (move, force) {\r\n        var _this = this;\r\n        var piecesString = this.board.toStringFullNoSeparate();\r\n        // TODO: optimize by specific color\r\n        var state = this.moveHelper.calcState({\r\n            piecesString: piecesString,\r\n            currentTurn: this.turn,\r\n            isQueenMoved: this.isQueenMoved,\r\n            isKingMoved: this.isKingMoved,\r\n            genCanMove: false,\r\n            genCanMoveForAnother: false,\r\n        });\r\n        var kingInDanger = state.blackKingInDanger || state.whiteKingInDanger;\r\n        if (kingInDanger) {\r\n            var pieceIndex = kingInDanger.map(function (point) {\r\n                return new _1.PieceIndex(point, _this.board.getPieceAtIndex(point.index));\r\n            }).filter(function (pieceIndex) {\r\n                return pieceIndex.piece !== null && !pieceIndex.piece.isTypeKing;\r\n            })[0];\r\n            move.boardStatus.attacker = pieceIndex;\r\n        }\r\n        move.boardStatus.winColor = state.winColor;\r\n        move.boardStatus.stuckColor = state.stuckColor;\r\n    };\r\n    REN.prototype.checkCountStatus = function (move, force) {\r\n        if (move.isCanMoveNext) {\r\n            var piecesString = this.board.toStringFullNoSeparate();\r\n            if (this.countUp.isCounting) {\r\n                move.isStartCounting = false;\r\n                this.countUp.checkUp(move.piece.color);\r\n                if (this.countUp.isCountingOut) {\r\n                    move.boardStatus.drawCountColor = this.countUp.color;\r\n                }\r\n            }\r\n            else {\r\n                var color = Piece_1.default.oppositeColor(move.piece.color);\r\n                var countState = this.moveHelper.calCount({\r\n                    color: Piece_1.default.oppositeColor(move.piece.color),\r\n                    piecesString: piecesString,\r\n                    force: !!force,\r\n                });\r\n                if (countState) {\r\n                    this.countUp.set(color, countState.countingToNumber, countState.countingNumber);\r\n                    move.isStartCounting = true;\r\n                }\r\n            }\r\n        }\r\n        move.syncRen(this);\r\n    };\r\n    REN.prototype.getWinColor = function () {\r\n        var state = this.moveHelper.calcState({\r\n            piecesString: this.board.toStringFullNoSeparate(),\r\n            currentTurn: this.turn,\r\n            isQueenMoved: this.isQueenMoved,\r\n            isKingMoved: this.isKingMoved,\r\n            genCanMove: false,\r\n            genCanMoveForAnother: false,\r\n        });\r\n        return state.winColor;\r\n    };\r\n    REN.prototype.syncWithMove = function (move) {\r\n        if (move) {\r\n            var countUp = this.countUp;\r\n            if (countUp.isCounting && this.turn !== countUp.color && !move.isStartCounting) {\r\n                countUp.isCountingUp = true;\r\n            }\r\n        }\r\n    };\r\n    return REN;\r\n}());\r\nexports.default = REN;\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=REN.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EVENT_FLAG_MOVING = exports.EVENT_FLAG_COUNT_UP_OUT = exports.EVENT_FLAG_COUNTING_UP = exports.EVENT_FLAG_START_COUNTING = exports.EVENT_FLAG_DRAW = exports.EVENT_FLAG_WIN = exports.EVENT_FLAG_ATTACK = exports.PIECE_FLAG_START_COUNTING = exports.PIECE_FLAG_UPGRADE = exports.PIECE_FLAG_JUMP = exports.PIECE_FLAG_KILL = exports.NOT_SET = exports.DEFAULT_BOARD_STR = exports.STRING_COUNT = void 0;\r\n// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\r\nexports.STRING_COUNT = 'B2F8G2H2K1Q1b2f8g2h2k1q1';\r\n// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\r\nexports.DEFAULT_BOARD_STR = 'BHGKQGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgqkghb';\r\nexports.NOT_SET = '-';\r\nexports.PIECE_FLAG_KILL = '<';\r\nexports.PIECE_FLAG_JUMP = '^';\r\nexports.PIECE_FLAG_UPGRADE = '*';\r\nexports.PIECE_FLAG_START_COUNTING = '#';\r\nexports.EVENT_FLAG_ATTACK = 'attack';\r\nexports.EVENT_FLAG_WIN = 'win';\r\nexports.EVENT_FLAG_DRAW = 'draw';\r\nexports.EVENT_FLAG_START_COUNTING = 'start-counting';\r\nexports.EVENT_FLAG_COUNTING_UP = 'counting-up';\r\nexports.EVENT_FLAG_COUNT_UP_OUT = 'count-up-out';\r\nexports.EVENT_FLAG_MOVING = 'moving';\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=constant.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Point = exports.REN = exports.PieceIndex = exports.Piece = exports.KqJumped = exports.KAttacked = exports.Graveyard = exports.CountUp = exports.Board = void 0;\r\nvar Board_1 = require(\"./Board\");\r\nObject.defineProperty(exports, \"Board\", { enumerable: true, get: function () { return __importDefault(Board_1).default; } });\r\nvar CountUp_1 = require(\"./CountUp\");\r\nObject.defineProperty(exports, \"CountUp\", { enumerable: true, get: function () { return __importDefault(CountUp_1).default; } });\r\nvar Graveyard_1 = require(\"./Graveyard\");\r\nObject.defineProperty(exports, \"Graveyard\", { enumerable: true, get: function () { return __importDefault(Graveyard_1).default; } });\r\nvar KAttacked_1 = require(\"./KAttacked\");\r\nObject.defineProperty(exports, \"KAttacked\", { enumerable: true, get: function () { return __importDefault(KAttacked_1).default; } });\r\nvar KqJumped_1 = require(\"./KqJumped\");\r\nObject.defineProperty(exports, \"KqJumped\", { enumerable: true, get: function () { return __importDefault(KqJumped_1).default; } });\r\nvar Piece_1 = require(\"./Piece\");\r\nObject.defineProperty(exports, \"Piece\", { enumerable: true, get: function () { return __importDefault(Piece_1).default; } });\r\nvar PieceIndex_1 = require(\"./PieceIndex\");\r\nObject.defineProperty(exports, \"PieceIndex\", { enumerable: true, get: function () { return __importDefault(PieceIndex_1).default; } });\r\nvar REN_1 = require(\"./REN\");\r\nObject.defineProperty(exports, \"REN\", { enumerable: true, get: function () { return __importDefault(REN_1).default; } });\r\nvar Point_1 = require(\"./Point\");\r\nObject.defineProperty(exports, \"Point\", { enumerable: true, get: function () { return __importDefault(Point_1).default; } });\r\n__exportStar(require(\"./constant\"), exports);\r\n/*\r\n * Copyright (c) 2021, K4us\r\n * Author: Raksa Eng <eng.raksa@gmail.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n *---------------------------------------------------------------------------- */ \r\n//# sourceMappingURL=index.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(507);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","__importDefault","this","mod","__esModule","Object","defineProperty","value","package_json_1","constant_1","KPGN_1","table_1","REN_1","KhmerChess","renStr","ren","default","fromString","kpgn","prototype","loadKpng","option","fromJson","resetBoard","getCanMoves","genAllCanMoves","getCanMovePointsByPoint","point","validateRENStr","valid","error_number","error","message","getRENStr","toString","get","board","piecesMultiArray","enumerable","configurable","pieces","graveyard","getKPGN","toJson","loadKpgn","kpgnJosn","options","drawAscii","turn","set","move","moveFromIndex","moveToIndex","addMove","clearBoard","getHistories","moves","toKhmerNum","englishNum","split","map","c","VERTICAL_NOTE_LETTERS","VERTICAL_NOTE_LETTERS_ENGLISH","indexOf","join","title","name","version","jsis_1","HVPont","h","v","isUndefined","Number","HORIZONTAL_CODE_LETTERS","Piece_1","boardHelper_1","MoveHelper","isWhiteColor","currentTurn","init","piecesString","isQueenMoved","isKingMoved","genCanMove","genCanMoveForAnother","whiteMoves","blackMoves","whiteKingInDanger","whiteKingWillInDanger","blackKingInDanger","blackKingWillInDanger","winColor","stuckColor","generateCanMoves","_this","filter","filterPieceInBoard","whitePieces","blackPieces","genMoves","pieceIndices","forEach","pieceIndex","isHaveMoved","piece","isTypeKing","isTypeQueen","canMovePoints","genCanMovePointsByPiecePoint","cleanPieceNoMove","cleanMoves","isTrue","length","splice","checkIfKingInDanger","getKingInDanger","PIECE_COLOR_WHITE","getKingWillInDanger","PIECE_COLOR_BLACK","genWinLost","getStuck","isWhiteTurn","calcCanMove","anotherMoves","calcState","calCount","_a","color","force","checkCount","isHasMoved","index","Rectangle","x","y","width","height","isContainsPoint","isValidPoint","ROW_LAST_INDEX","CountUpState","genMask_1","Point_1","Rectangle_1","ren_1","mask","countingNumber","countingToNumber","BoardHelper","convertMask","point1","sign","point2","fromIndex","getCharPieceFromString","isIndexInBoard","CELL_COUNT","EMPTY_PIECE","getCharPieceInPos","getPieceByIndex","charCode","isValidPiece","fromCharCode","getPieceCanMovePoses","type","_pos","newIndex","push","getPieceCanMovePosesValid","_poses","n","thisPos","p","distPiece","isTypeFish","isTypeBoat","_x","_y","_n","Math","abs","_s","xyToIndex","isNull","replacePiecesStringAtIndex","substring","injectPiece","index1","index2","isCharPiecesInBoard","kingPos","PIECE_TYPE_KING","pieceCharCode","j","isHaveCaptured","points","str","code","getPiecesInBoard","ROW_NUMBER","PieceIndex","isColorWhite","extractPiecesToArray","piecesStringArr","pieceAll","isStateCount","checkCountable","weaker","stronger","oppositeColor","countChar","PIECE_TYPE_FISH","count","toukCount","PIECE_TYPE_BOAT","PIECE_TYPE_GENERAL","PIECE_TYPE_HORSE","start","isUpgradable","isColorBlack","_b","_c","_d","HORIZONTAL_NOTE_LETTERS_ENGLISH","HORIZONTAL_NOTE_LETTERS","ROW_FIRST_INDEX","BOARD_SEPARATOR","PIECE_COLOR_EMPTY","PIECE_NAMES_ENGLISH","PIECE_NAMES","PIECE_TYPE_TRANSFORM_FISH","PIECE_TYPE_QUEEN","COLOR_NAMES_ENGLISH","COLOR_NAMES","Array","from","_","concat","__createBinding","create","o","m","k","k2","undefined","__exportStar","hasOwnProperty","call","jsis","genMask","boardHelper","HVPont_1","MoveHelper_1","isValid","isString","isNotEmpty","isValidString","isNumber","isStringNumber","isNaN","isArray","arr","isFunction","f","isObject","isBoolean","b","isValidBoolean","isFalse","isPoint","isValidObject","isValidNumber","isSize","size","isOdd","isEven","isUpperCase","toUpperCase","KhmerChess_1","__setModuleDefault","__importStar","result","khmerChessNS","fromBoardPoint","toGraveyardPoint","Move_1","Player_1","Result_1","Timer_1","base64Helper_1","KPGN","event","date","location","players","white","black","last","whiteWin","blackWin","timer","latestMove","isCanMoveNext","getMove","loadRENStr","syncWithMove","loadMovesStrings","currentRen","reverse","moveStr","Error","backRen","Date","console","log","fromBase64","json","JSON","parse","decode","toBase64","jsStr","stringify","encode","brain_1","Captured_1","Move","moveFrom","moveTo","isUpgrading","captured","boardStatus","attacker","drawCountColor","isStartCounting","upgrade","kqJumping","KqJumped","setRen","checkBoardStatus","kqJumped","checkKQMoved","checkCountStatus","syncRen","whiteKing","whiteQueen","blackKing","blackQueen","isDraw","fromIndexCode","substr","killIndex","PIECE_FLAG_KILL","match","gyIndex","capturedPiece","fromIndexGraveyardIndex","jumpingIndex","PIECE_FLAG_JUMP","fromNumber","PIECE_FLAG_START_COUNTING","pCode","fIndexCode","indexCode","tIndexCode","flags","isJumped","toNumber","PIECE_FLAG_UPGRADE","getJumpingMessage","isEnglish","jump","isWhiteKingJumping","isWhiteQueenJumping","isBlackKingJumping","isBlackQueenJumping","getMessage","titleEnglish","Player","id","Result","win","draw","lost","Timer","totalSecond","bonusTime","currentWhite","currentBlack","Captured","EventHandler","_onEventListeners","_propEvent","events","_checkPropEvent","_isLockProp","shift","_checkOnEvent","data","_addPropEvent","_guardEventName","eventName","listener","_addOnEventListener","_removeOnEventListener","Base64","_keyStr","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","_utf8_encode","charCodeAt","charAt","replace","String","_utf8_decode","string","utftext","c1","c2","table","EventHandler_1","reduce","s","subArr","PieceIndex_1","constant_2","Board","boardStr","DEFAULT_BOARD_STR","newBoardStr","extract","isValidPiecesString","find","getKing","compress","reg","RegExp","$1","toStringFull","toPieceCharCode","toStringFullNoSeparate","getPieceAtIndex","setPieceAtIndex","CountUp","isCountingUp","isCounting","isWhite","clear","checkUp","countUpStr","NOT_SET","countUp","countingUp","countingUpWB","Graveyard","graveyardStr","removeAtIndex","KAttacked","kAttackedStr","toWhiteCharCode","kqJumpedStr","keyCodes","codeKeys","setProp","key","applyJumping","propKey","parseInt","__spreadArray","to","pack","arguments","ar","l","slice","Piece","toNormalCharCode","pieceCharCodeWhite","_isTypeEqual","isBlackColor","isWhiteCharCode","isTypeTransformedFish","toBlackCharCode","toLowerCase","onlyPiece","ruler","allPiecesString","some","downgrade","clone","pieceChars","pieceChar","toCode","Point","indexCodeToXY","indexCodeToIndex","indexToXY","floor","Board_1","KqJumped_1","KAttacked_1","CountUp_1","Graveyard_1","kpgn_1","_1","REN","renProps","moveHelper","turnStr","kAttacked","invalidPiecesString","isInvalidPieceCount","msg","piecesCount","pos","originPiece","obj","keys","sort","STRING_COUNT","moveBack","isCountingOut","targetPiece","lastIndex","movedToIndex","movedFromIndex","movedToGYIndex","renArr","state","kingInDanger","countState","getWinColor","EVENT_FLAG_MOVING","EVENT_FLAG_COUNT_UP_OUT","EVENT_FLAG_COUNTING_UP","EVENT_FLAG_START_COUNTING","EVENT_FLAG_DRAW","EVENT_FLAG_WIN","EVENT_FLAG_ATTACK","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}