!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(function(){return(()=>{"use strict";var e={198:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=u(n(876)),s=n(977),c=u(n(604)),l=o(n(100)),f=u(n(679)),d=n(72),h=u(n(19)),p=function(){function e(e){this.renInstance=h.default.fromString(e),this.kpgnInstance=new c.default(this.renInstance),this.boardEventController=new l.default}return e.prototype.loadRENStr=function(e){this.renInstance=h.default.fromString(e)},e.prototype.resetBoard=function(){this.renInstance=h.default.fromString()},e.prototype.getCanMoves=function(){return this.renInstance.genAllCanMoves()},e.prototype.getCanMovePointsByPoint=function(e){return this.renInstance.getCanMovePointsByPoint(e)},e.prototype.getAttacker=function(){return this.renInstance.getAttacker()},e.prototype.getWinColor=function(){return this.renInstance.getWinColor()},e.prototype.getStuckColor=function(){return null},e.prototype.isDraw=function(){return this.getStuckColor()||this.getDrawCountColor()},e.prototype.getDrawCountColor=function(){return null},e.prototype.gameOver=function(){return this.getWinColor()||this.isDraw()},e.prototype.validateRENStr=function(e){try{return h.default.fromString(e),{valid:!0,error_number:0,error:"No errors."}}catch(e){return{valid:!1,error_number:1,error:e.message}}},e.prototype.getRENStr=function(){return this.renInstance.toString()},Object.defineProperty(e.prototype,"piecesInBoardMultiArray",{get:function(){return this.renInstance.board.piecesMultiArray},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"piecesInBoard",{get:function(){return this.renInstance.board.pieces},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"piecesInGraveyard",{get:function(){return this.renInstance.graveyard.pieces},enumerable:!1,configurable:!0}),e.prototype.getKPGN=function(){return this.kpgnInstance.toJson()},e.prototype.loadKpgn=function(e,t){this.kpgnInstance=new c.default(this.renInstance)},e.prototype.drawAscii=function(){return f.default(this.renInstance)},Object.defineProperty(e.prototype,"turn",{get:function(){return this.renInstance.turn},set:function(e){this.renInstance.turn=e},enumerable:!1,configurable:!0}),e.prototype.move=function(e,t){var n=this.renInstance.move(e,t);return this.kpgnInstance.moves.push(n),n},e.prototype.undoMove=function(){return!1},e.prototype.clearBoard=function(){this.renInstance=h.default.fromString("4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB")},e.prototype.getHistories=function(){return this.kpgnInstance.moves},e.prototype.checkBoardEvent=function(){var e=this.getAttacker();if(!s.jsis.isNull(e)){var t=new l.BoardEvent({flag:d.EVENT_FLAG_ATTACK,actorPieceIndex:e});this.boardEventController.fireEvent(t)}var n=this.getWinColor();s.jsis.isNull(n)||(t=new l.BoardEvent({flag:d.EVENT_FLAG_WINN,actorPieceIndex:e}),this.boardEventController.fireEvent(t))},e.prototype.addBoardEventListener=function(e){this.boardEventController.addBoardEventListener(e)},e.prototype.removeBoardEventListener=function(e){this.boardEventController.removeBoardEventListener(e)},e.title=a.default.name,e.version=a.default.version,e}();t.default=p},945:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(946),o=r(n(273)),u=function(){function e(e,t){o.default.isUndefined(t)&&(t=(e=e[0])[1]),this.h=e,this.v=Number(t)}return Object.defineProperty(e.prototype,"x",{get:function(){return i.HORIZONTAL_CODE_LETTERS.indexOf(this.h)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.v-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexCode",{get:function(){return""+this.h+this.v},enumerable:!1,configurable:!0}),e}();t.default=u},639:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(863)),o=r(n(255)),u=n(946),a=function(){function e(){}return Object.defineProperty(e.prototype,"isWhiteTurn",{get:function(){return i.default.isWhiteColor(this.currentTurn)},enumerable:!1,configurable:!0}),e.prototype.init=function(e){this.piecesString=e.piecesString,this.currentTurn=e.currentTurn,this.isQueenMoved=e.isQueenMoved,this.isKingMoved=e.isKingMoved,this.genCanMove=e.genCanMove,this.genCanMoveForAnother=e.genCanMoveForAnother,this.whiteMoves=[],this.blackMoves=[],this.whiteKingInDanger=null,this.whiteKingWillInDanger=null,this.blackKingInDanger=null,this.blackKingWillInDanger=null,this.winColor=null,this.stuckColor=null},e.prototype.generateCanMoves=function(){var e=this,t=o.default.filterPieceInBoard(this.piecesString);this.whiteMoves=t.whitePieces,this.blackMoves=t.blackPieces;var n=function(t){t.forEach((function(t){var n=e.isKingMoved;t.piece.isTypeKing||(n=!!t.piece.isTypeQueen&&e.isQueenMoved);var r=e.genCanMovePointsByPiecePoint(t.point,t.piece,e.piecesString,n);t.canMovePoints=r}))};n(this.whiteMoves),n(this.blackMoves)},e.prototype.cleanPieceNoMove=function(){var e=function(e){for(var t=!0;t;){t=!1;for(var n=0;n<e.length;n++)if(!e[n].canMovePoints.length){e.splice(n,1),t=!0;break}}};e(this.whiteMoves),e(this.blackMoves)},e.prototype.checkIfKingInDanger=function(){this.whiteKingInDanger=o.default.getKingInDanger(u.PIECE_COLOR_WHITE,this.piecesString),this.whiteKingWillInDanger=o.default.getKingWillInDanger(u.PIECE_COLOR_WHITE,this.piecesString),this.blackKingInDanger=o.default.getKingInDanger(u.PIECE_COLOR_BLACK,this.piecesString),this.blackKingWillInDanger=o.default.getKingWillInDanger(u.PIECE_COLOR_BLACK,this.piecesString)},e.prototype.genWinLost=function(){this.whiteKingInDanger&&!this.whiteMoves.length?this.winColor=u.PIECE_COLOR_BLACK:this.blackKingInDanger&&!this.blackMoves.length&&(this.winColor=u.PIECE_COLOR_WHITE)},e.prototype.getStuck=function(){this.winColor||(this.isWhiteTurn&&!this.whiteMoves.length?this.stuckColor=u.PIECE_COLOR_WHITE:this.isWhiteTurn||this.blackMoves.length||(this.stuckColor=u.PIECE_COLOR_BLACK))},e.prototype.calcCanMove=function(e){this.init(e),this.generateCanMoves(),this.cleanPieceNoMove();var t=[];this.genCanMove&&(t=this.isWhiteTurn?this.whiteMoves:this.blackMoves);var n=[];return this.genCanMoveForAnother&&(n=this.isWhiteTurn?this.blackMoves:this.whiteMoves),{moves:t,anotherMoves:n}},e.prototype.calcState=function(e){return this.init(e),this.generateCanMoves(),this.cleanPieceNoMove(),this.checkIfKingInDanger(),this.genWinLost(),this.getStuck(),{blackKingInDanger:this.blackKingInDanger,whiteKingInDanger:this.whiteKingInDanger,blackKingWillInDanger:this.blackKingWillInDanger,whiteKingWillInDanger:this.whiteKingWillInDanger,winColor:this.winColor,stuckColor:this.stuckColor,blackCountable:o.default.checkCountable(u.PIECE_COLOR_BLACK,this.piecesString),whiteCountable:o.default.checkCountable(u.PIECE_COLOR_WHITE,this.piecesString)}},e.prototype.calCount=function(e){return{countingBlack:o.default.checkCount(u.PIECE_COLOR_BLACK,e.piecesString,e.force),countingWhite:o.default.checkCount(u.PIECE_COLOR_WHITE,e.piecesString,e.force)}},e.prototype.genCanMovePointsByPiecePoint=function(e,t,n,r){return o.default.genCanMovePointsByPiecePoint(e.index,t,n,r)},e}();t.default=a},41:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(946),i=function(){function e(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r}return e.prototype.isContainsPoint=function(e){var t=e.x,n=e.y;return this.x<=t&&this.x+this.width>=t&&this.y<=n&&this.y+this.height>=n},e.isValidPoint=function(t){return new e(0,0,r.ROW_LAST_INDEX,r.ROW_LAST_INDEX).isContainsPoint(t)},e}();t.default=i},98:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(231)),a="trigger-move",s=function(e){function t(){return e.call(this,{events:{TRIGGER_MOVE:a}})||this}return i(t,e),t.prototype.removeOnTriggerMoveEventListener=function(e){this._removeOnEventListener(a,e)},t.prototype.addOnTriggerMoveEventListener=function(e){this._addOnEventListener(a,e)},t}(u.default);t.default=s},255:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(273)),o=r(n(149)),u=n(946),a=r(n(135)),s=r(n(863)),c=r(n(41)),l=n(362),f=o.default(),d=function(){function e(){this.convertMask=function(e,t,n){var r=s.default.isWhiteColor(n)?1:-1,i=a.default.fromIndex(t);return e.x=e.x*r+i.x,e.y=e.y*r+i.y,c.default.isValidPoint(e)?e.index:null}}return e.prototype.getCharPieceFromString=function(e,t){return a.default.isIndexInBoard(t)&&e.length===u.CELL_COUNT?e[t]:u.EMPTY_PIECE},e.prototype.getCharPieceInPos=function(e,t){return this.getCharPieceFromString(t,e)},e.prototype.getPieceByIndex=function(e,t){var n=this.getCharPieceInPos(e,t);return{isValidPiece:s.default.isValidPiece(n),piece:s.default.fromCharCode(n)}},e.prototype.getPieceCanMovePoses=function(e,t){var n=this,r=[];return f[t.type].forEach((function(o){var u=n.convertMask(new a.default(o[0],o[1]),e,t.color);i.default.isNull(u)||r.push(u)})),r},e.prototype.getPieceCanMovePosesValid=function(e,t,n){for(var r=this.getPieceCanMovePoses(e,t),o=[],u=r.length,s=a.default.fromIndex(e),c=0;c<u;c++){var l=a.default.fromIndex(r[c]),f=this.getPieceByIndex(l.index,n);if(f.isValidPiece?(t.color===f.piece.color||t.isTypeFish&&l.x===s.x)&&(l=null):t.isTypeFish&&l.x!==s.x&&(l=null),!i.default.isNull(l)&&t.isTypeBoat){var d=s.x,h=s.y;if(l.x===s.x){for(var p=Math.abs(l.y-s.y),E=s.y<l.y?1:-1;--p>0;)if(this.getPieceByIndex(a.default.xyToIndex(d,h+E*p),n).isValidPiece){l=null;break}}else if(l.y===s.y)for(p=Math.abs(l.x-s.x),E=s.x<l.x?1:-1;--p>0;)if(this.getPieceByIndex(a.default.xyToIndex(d+E*p,h),n).isValidPiece){l=null;break}}i.default.isNull(l)||o.push(r[c])}return o},e.prototype.replacePiecesStringAtIndex=function(e,t,n){return e.substring(0,n)+t+e.substring(n+1)},e.prototype.injectPiece=function(e,t,n){var r=e[t];return this.isCharPiecesInBoard(r,e)?(e=this.replacePiecesStringAtIndex(e,u.EMPTY_PIECE,t),e=this.replacePiecesStringAtIndex(e,r,n)):null},e.prototype.getKingWillInDanger=function(e,t){for(var n=t.indexOf(new s.default(u.PIECE_TYPE_KING,e).pieceCharCode),r=t.length,i=0;i<r;i++){var o=this.getPieceByIndex(i,t);if(o.isValidPiece&&o.piece.color!==e&&o.piece.isTypeBoat)for(var c=this.getPieceCanMovePoses(i,o.piece),l=0;l<c.length;l++)if(c[l]===n)return[a.default.fromIndex(i),a.default.fromIndex(n)]}return null},e.prototype.getKingInDanger=function(e,t){for(var n=t.indexOf(new s.default(u.PIECE_TYPE_KING,e).pieceCharCode),r=t.length,i=0;i<r;i++){var o=this.getPieceByIndex(i,t);if(o.isValidPiece&&o.piece.color!==e)for(var c=this.getPieceCanMovePosesValid(i,o.piece,t),l=0;l<c.length;l++)if(c[l]===n)return[a.default.fromIndex(i),a.default.fromIndex(n)]}return null},e.prototype.genCanMovePointsByPiecePoint=function(e,t,n,r){var o=this.getPieceCanMovePosesValid(e,t,n),u=this.isHaveCaptured(n);if(t.isTypeKing)u||r||((s=this.convertMask(new a.default(2,1),e,t.color))&&!this.getPieceByIndex(s,n).isValidPiece&&o.push(s),(s=this.convertMask(new a.default(-2,1),e,t.color))&&!this.getPieceByIndex(s,n).isValidPiece&&o.push(s));else if(t.isTypeQueen){var s;u||r||(s=this.convertMask(new a.default(-0,2),e,t.color))&&!this.getPieceByIndex(s,n).isValidPiece&&o.push(s)}for(var c=o.length,l=[],f=0;f<c;f++){var d=this.injectPiece(n,e,o[f]);i.default.isNull(this.getKingInDanger(t.color,d))&&l.push(a.default.fromIndex(o[f]))}return l},e.prototype.isCharPiecesInBoard=function(e,t){return!!~t.indexOf(e)},e.prototype.getPiecesInBoard=function(e){return e.split("").filter((function(e){return s.default.isValidPiece(e)}))},e.prototype.isHaveCaptured=function(e){return this.getPiecesInBoard(e).length<4*u.ROW_NUMBER},e.prototype.filterPieceInBoard=function(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];if(s.default.isValidPiece(i)){var o=new l.PieceIndex(a.default.fromIndex(r),s.default.fromCharCode(i));o.piece.isColorWhite?t.push(o):n.push(o)}}return{whitePieces:t,blackPieces:n}},e.prototype.extractPiecesToArray=function(e){var t,n=e.split(""),r=((t={})[u.PIECE_COLOR_BLACK]=[],t[u.PIECE_COLOR_WHITE]=[],t);return n.forEach((function(e){if(e!==u.EMPTY_PIECE){var t=s.default.fromCharCode(e);r[t.color].push(t.type)}})),r},e.prototype.isStateCount=function(e,t){return 1===this.extractPiecesToArray(t)[e].length},e.prototype.checkCountable=function(e,t){var n=this.extractPiecesToArray(t),r=n[e],i=n[s.default.oppositeColor(e)];return r.length<=2&&i.length>=2},e.prototype.checkCount=function(e,t,n){var r,i,o=function(e,t){return e.join("").split(t).length-1},a=this.extractPiecesToArray(t),c=a[e],l=a[s.default.oppositeColor(e)];if(1===c.length&&l.length>1){if(r=l,i=u.PIECE_TYPE_FISH,!~r.indexOf(i)){var f=64,d=o(l,u.PIECE_TYPE_BOAT);return d?f=d>1?8:16:o(l,u.PIECE_TYPE_GENERAL)>1?f=22:o(l,u.PIECE_TYPE_HORSE)>1?f=32:o(l,u.PIECE_TYPE_GENERAL)&&(f=44),[l.length+1,f]}return[0,64]}return n&&this.checkCountable(e,t)?[0,64]:null},e.prototype.isUpgradable=function(e,t){if(e.isTypeFish){if(e.isColorBlack&&t.y<=2)return!0;if(e.isColorWhite&&t.y>=5)return!0}return!1},e}();t.default=new d},946:(e,t)=>{var n,r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.VERTICAL_NOTE_LETTERS_ENGLISH=t.HORIZONTAL_NOTE_LETTERS_ENGLISH=t.VERTICAL_NOTE_LETTERS=t.HORIZONTAL_NOTE_LETTERS=t.HORIZONTAL_CODE_LETTERS=t.CELL_COUNT=t.ROW_LAST_INDEX=t.ROW_FIRST_INDEX=t.ROW_NUMBER=t.BOARD_SEPARATOR=t.PIECE_COLOR_EMPTY=t.EMPTY_PIECE=t.PIECE_NAMES_ENGLISH=t.PIECE_NAMES=t.PIECE_TYPE_TRANSFORM_FISH=t.PIECE_TYPE_FISH=t.PIECE_TYPE_QUEEN=t.PIECE_TYPE_KING=t.PIECE_TYPE_GENERAL=t.PIECE_TYPE_HORSE=t.PIECE_TYPE_BOAT=t.COLOR_NAMES_ENGLISH=t.COLOR_NAMES=t.PIECE_COLOR_BLACK=t.PIECE_COLOR_WHITE=void 0,t.PIECE_COLOR_WHITE="w",t.PIECE_COLOR_BLACK="b",t.COLOR_NAMES=((n={})[t.PIECE_COLOR_BLACK]="ខ្មៅ",n[t.PIECE_COLOR_WHITE]="ស",n),t.COLOR_NAMES_ENGLISH=((r={})[t.PIECE_COLOR_BLACK]="black",r[t.PIECE_COLOR_WHITE]="white",r),t.PIECE_TYPE_BOAT="b",t.PIECE_TYPE_HORSE="h",t.PIECE_TYPE_GENERAL="g",t.PIECE_TYPE_KING="k",t.PIECE_TYPE_QUEEN="q",t.PIECE_TYPE_FISH="f",t.PIECE_TYPE_TRANSFORM_FISH="t",t.PIECE_NAMES=((i={})[t.PIECE_TYPE_BOAT]="ទូក",i[t.PIECE_TYPE_HORSE]="សេះ",i[t.PIECE_TYPE_GENERAL]="គោល",i[t.PIECE_TYPE_KING]="ស្តេច",i[t.PIECE_TYPE_QUEEN]="នាង",i[t.PIECE_TYPE_FISH]="ត្រី",i[t.PIECE_TYPE_TRANSFORM_FISH]="ត្រីបក",i),t.PIECE_NAMES_ENGLISH=((o={})[t.PIECE_TYPE_BOAT]="boat",o[t.PIECE_TYPE_HORSE]="horse",o[t.PIECE_TYPE_GENERAL]="general",o[t.PIECE_TYPE_KING]="king",o[t.PIECE_TYPE_QUEEN]="queen",o[t.PIECE_TYPE_FISH]="fish",o[t.PIECE_TYPE_TRANSFORM_FISH]="transformed-fish",o),t.EMPTY_PIECE=".",t.PIECE_COLOR_EMPTY=".",t.BOARD_SEPARATOR="/",t.ROW_NUMBER=8,t.ROW_FIRST_INDEX=0,t.ROW_LAST_INDEX=7,t.CELL_COUNT=t.ROW_NUMBER*t.ROW_NUMBER,t.HORIZONTAL_CODE_LETTERS="abcdefgh",t.HORIZONTAL_NOTE_LETTERS=["ក","ខ","គ","ឃ","ង","ច","ឆ","ជ"],t.VERTICAL_NOTE_LETTERS=["១","២","៣","៤","៥","៦","៧","៨","៩","១០","១១","១២","១៣","១៤","១៥","១៦","១៧","១៨","១៩","២០","២១","២២","២៣","២៤","២៥","២៦","២៧","២៨","២៩","៣០"],t.HORIZONTAL_NOTE_LETTERS_ENGLISH="abcdefgh",t.VERTICAL_NOTE_LETTERS_ENGLISH=Array.from({length:30},(function(e,t){return""+(t+1)}))},149:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(946);t.default=function(){var e={};return e[r.PIECE_TYPE_BOAT]=[[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,-1],[0,-2],[0,-3],[0,-4],[0,-5],[0,-6],[0,-7],[0,-8],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[-1,0],[-2,0],[-3,0],[-4,0],[-5,0],[-6,0],[-7,0],[-8,0]],e[r.PIECE_TYPE_HORSE]=[[-1,-2],[1,-2],[-2,-1],[2,-1],[-1,2],[1,2],[-2,1],[2,1]],e[r.PIECE_TYPE_QUEEN]=[[-1,-1],[1,-1],[-1,1],[1,1]],e[r.PIECE_TYPE_GENERAL]=e[r.PIECE_TYPE_QUEEN].concat([[0,1]]),e[r.PIECE_TYPE_KING]=e[r.PIECE_TYPE_GENERAL].concat([[0,-1],[1,0],[-1,0]]),e[r.PIECE_TYPE_FISH]=[[0,1],[-1,1],[1,1]],e[r.PIECE_TYPE_TRANSFORM_FISH]=e[r.PIECE_TYPE_QUEEN],e}},977:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MoveHelper=t.HVPont=t.jsis=t.genMask=t.boardHelper=t.boardEventController=t.Rectangle=void 0;var u=n(41);Object.defineProperty(t,"Rectangle",{enumerable:!0,get:function(){return o(u).default}});var a=n(98);Object.defineProperty(t,"boardEventController",{enumerable:!0,get:function(){return o(a).default}});var s=n(255);Object.defineProperty(t,"boardHelper",{enumerable:!0,get:function(){return o(s).default}});var c=n(149);Object.defineProperty(t,"genMask",{enumerable:!0,get:function(){return o(c).default}});var l=n(273);Object.defineProperty(t,"jsis",{enumerable:!0,get:function(){return o(l).default}});var f=n(945);Object.defineProperty(t,"HVPont",{enumerable:!0,get:function(){return o(f).default}});var d=n(639);Object.defineProperty(t,"MoveHelper",{enumerable:!0,get:function(){return o(d).default}}),i(n(946),t)},273:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={isValid:function(e){return!this.isNull(e)&&!this.isUndefined(e)},isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},isString:function(e){return this.isValid(e)&&"string"==typeof e},isNotEmpty:function(e){return this.isValidString(e)&&""!=e},isNumber:function(e){return this.isValid(e)&&"number"==typeof e},isStringNumber:function(e){return this.isString(e)&&""!=e&&!isNaN(Number(e))},isArray:function(e){return this.isValid(e)&&e instanceof Array},isFunction:function(e){return this.isValid(e)&&"function"==typeof e},isObject:function(e){return this.isValid(e)&&e instanceof Object},isBoolean:function(e){return this.isValid(e)&&"boolean"==typeof e},isTrue:function(e){return this.isValidBoolean(e)&&e},isFalse:function(e){return this.isValidBoolean(e)&&!e},isPoint:function(e){return this.isValid(e)&&this.isValidObject(e)&&this.isValidNumber(e.x)&&this.isValidNumber(e.y)},isSize:function(e){return this.isValid(e)&&this.isValidObject(e)&&this.isValidNumber(e.width)&&this.isValidNumber(e.height)},isOdd:function(e){return!!(e%2)},isEven:function(e){return!this.isOdd(e)},isUpperCase:function(e){return e===e.toUpperCase()}};t.default=n},303:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.KhmerChess=void 0,i(n(977),t),i(n(997),t),i(n(362),t),i(n(148),t);var u=n(198);Object.defineProperty(t,"KhmerChess",{enumerable:!0,get:function(){return o(u).default}})},672:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.piece,n=e.fromBoardPoint,r=e.toGraveyardPoint;this.piece=t,this.fromBoardPoint=n,this.toGraveyardPoint=r}},604:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(106)),o=r(n(10)),u=function(){function e(e){this.players={white:new i.default,black:new i.default},this.result={last:{whiteWin:!1,blackWin:!1},white:new o.default},this.renInstant=e,this.moves=[]}return e.prototype.toJson=function(){return{event:this.event,date:this.date,location:this.location,players:{white:this.players.white.toJson(),black:this.players.black.toJson()},result:{last:{whiteWin:this.result.last.whiteWin,blackWin:this.result.last.blackWin},white:this.result.white.toJson()},moves:this.moves.map((function(e){return e.toJson()})),ren:this.renInstant.toString(),timer:this.timer.toJson()}},e}();t.default=u},762:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(977),o=n(72),u=r(n(863)),a=r(n(135)),s=r(n(672)),c=function(){function e(e){var t=e.piece,n=e.moveFrom,r=e.moveTo,o=e.isJumping,u=e.isUpgrading,a=e.captured;this.piece=t,this.moveFrom=n,this.moveTo=r,this.isJumping=!!o,this.isUpgrading=!!u,this.captured=a||null,i.boardHelper.isUpgradable(t,r)&&(this.isUpgrading=!0,t.type=i.PIECE_TYPE_TRANSFORM_FISH)}return e.fromMovedString=function(t){var n="Fc5d6xf",r=u.default.fromCharCode(n[0]),i=a.default.fromIndexCode(n.substr(1,2)),c=a.default.fromIndexCode(n.substr(3,2)),l=new e({piece:r,moveFrom:i,moveTo:c});if(n[5]===o.PIECE_FLAG_KILL){var f=n[6];l.captured=new s.default({fromBoardPoint:c,toGraveyardPoint:a.default.fromIndexGraveyardIndex(t),piece:u.default.fromCharCode(f)})}else n[5]===o.PIECE_FLAG_JUMP&&(l.isJumping=!0);return l},e.prototype.toString=function(){var e=this.piece.pieceCharCode,t=this.moveFrom.indexCode,n=this.moveTo.indexCode,r=this.captured?o.PIECE_FLAG_KILL:"";return this.isJumping&&(r+=o.PIECE_FLAG_JUMP),this.isUpgrading&&(r+=o.PIECE_FLAG_UPGRADE),""+e+t+n+r},e.prototype.toJson=function(){return{fromIndex:this.moveFrom.index,toIndex:this.moveTo.index,isJumping:this.isJumping,capturedPiece:this.captured?this.captured.piece.pieceCharCode:null}},e.prototype.getMessage=function(e){if(e){var t="";this.captured&&(t=" captures "+this.captured.piece.titleEnglish);var n=this.isUpgrading?" transforms":"";return this.piece.titleEnglish+" moved from "+this.moveFrom.titleEnglish+" to "+this.moveTo.titleEnglish+n+t}return t="",this.captured&&(t=" ស៊ី"+this.captured.piece.title),n=this.isUpgrading?" បក":"",this.piece.title+" ដើរ​ពី "+this.moveFrom.title+" ទៅ "+this.moveTo.title+n+t},e}();t.default=c},106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.name=null,this.id=null,this.id=e,this.name=t}return e.prototype.toJson=function(){return{id:this.id,name:this.name}},e}();t.default=n},10:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.win=0,this.draw=0,this.lost=0,this.win=e,this.draw=t,this.lost=n}return e.prototype.toJson=function(){return{win:this.win,draw:this.draw,lost:this.lost}},e}();t.default=n},334:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.totalSecond=e,this.currentWhite=t,this.currentBlack=n}return e.prototype.toJson=function(){return{totalSecond:this.totalSecond,currentWhite:this.currentWhite,currentBlack:this.currentBlack}},e}();t.default=n},997:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=t.Result=t.Player=t.Captured=t.Move=t.KPGN=void 0;var i=n(604);Object.defineProperty(t,"KPGN",{enumerable:!0,get:function(){return r(i).default}});var o=n(762);Object.defineProperty(t,"Move",{enumerable:!0,get:function(){return r(o).default}});var u=n(672);Object.defineProperty(t,"Captured",{enumerable:!0,get:function(){return r(u).default}});var a=n(106);Object.defineProperty(t,"Player",{enumerable:!0,get:function(){return r(a).default}});var s=n(10);Object.defineProperty(t,"Result",{enumerable:!0,get:function(){return r(s).default}});var c=n(334);Object.defineProperty(t,"Timer",{enumerable:!0,get:function(){return r(c).default}})},100:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BoardEvent=void 0;var u=n(362),a=o(n(231)),s=function(){function e(e){var t=e.flag,n=e.actorPieceIndex;this.flag=t,this.actorPieceIndex=n}return Object.defineProperty(e.prototype,"isAttack",{get:function(){return this.flag===u.EVENT_FLAG_ATTACK},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWin",{get:function(){return this.flag===u.EVENT_FLAG_WINN},enumerable:!1,configurable:!0}),e}();t.BoardEvent=s;var c=function(e){function t(){return e.call(this,{events:{EVENT:t.EVENT}})||this}return i(t,e),t.prototype.fireEvent=function(e){this._addPropEvent(t.EVENT,e)},t.prototype.addBoardEventListener=function(e){this._addOnEventListener(t.EVENT,e)},t.prototype.removeBoardEventListener=function(e){this._removeOnEventListener(t.EVENT,e)},t.EVENT="event",t}(a.default);t.default=c},231:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._onEventListeners={},this._propEvent=[],this._onEventListeners={},this._propEvent=[],this.events=e.events}return e.prototype._checkPropEvent=function(){if(!this._isLockProp)for(;this._propEvent.length;){var e=this._propEvent.shift();this._checkOnEvent(e.name,e.data)}},e.prototype._addPropEvent=function(e,t){this._propEvent.push({name:e,data:t}),this._checkPropEvent()},e.prototype._guardEventName=function(e){if(!e)throw new Error("invalid event name")},e.prototype._checkOnEvent=function(e,t){this._guardEventName(e),this._onEventListeners[e]=this._onEventListeners[e]||[],this._onEventListeners[e].forEach((function(e){e(t)}))},e.prototype._addOnEventListener=function(e,t){this._guardEventName(e),this._onEventListeners[e]=this._onEventListeners[e]||[],this._onEventListeners[e].push(t)},e.prototype._removeOnEventListener=function(e,t){this._guardEventName(e),this._onEventListeners[e]=this._onEventListeners[e]||[];var n=this._onEventListeners[e].indexOf(t);~n&&this._onEventListeners[e].splice(n,1)},e}();t.default=n},148:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.table=t.BoardEvent=t.BoardEventController=t.EventHandler=void 0;var i=n(231);Object.defineProperty(t,"EventHandler",{enumerable:!0,get:function(){return r(i).default}});var o=n(100);Object.defineProperty(t,"BoardEventController",{enumerable:!0,get:function(){return r(o).default}});var u=n(100);Object.defineProperty(t,"BoardEvent",{enumerable:!0,get:function(){return u.BoardEvent}});var a=n(679);Object.defineProperty(t,"table",{enumerable:!0,get:function(){return r(a).default}})},679:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.board.piecesMultiArray;return t.reverse().reduce((function(e,n,r){return e+"\n"+(8-r)+" ┃"+n.map((function(e){return" "+(e?e.pieceCharCode:" ")+" "})).join("┃")+"┃\n  "+(r===t.length-1?"┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛":"┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫")}),"  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓")+"\n    a   b   c   d   e   f   g   h\n  ┏"+e.graveyard.pieces.map((function(){return"━━━"})).join("┳")+"┓\n  ┃"+e.graveyard.pieces.map((function(e){return" "+(e?e.pieceCharCode:" ")+" "})).join("┃")+"┃\n  ┗"+e.graveyard.pieces.map((function(){return"━━━"})).join("┻")+"┛"}},191:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(863)),o=r(n(568)),u=n(72),a=n(946),s=r(n(273)),c=r(n(135)),l=function(){function e(e){this.pieceIndices=Array.from({length:a.CELL_COUNT},(function(e,t){var n=c.default.fromIndex(t);return new o.default(n,null)})),s.default.isUndefined(e)&&(e=u.DEFAULT_BOARD_STR);var t=this.extract(e).replace(/\//g,"");if(t.length<a.CELL_COUNT||!i.default.isValidPiecesString(t))throw new Error("Invalid board string "+e);this.pieceIndices=t.split("").map((function(e,t){var n=c.default.fromIndex(t);return new o.default(n,e===a.EMPTY_PIECE?null:i.default.fromCharCode(e))}))}return Object.defineProperty(e.prototype,"piecesMultiArray",{get:function(){var e=[[],[],[],[],[],[],[],[]];return this.pieceIndices.forEach((function(t){e[t.point.y][t.point.x]=t.piece})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pieces",{get:function(){return this.pieceIndices.map((function(e){return e.piece}))},enumerable:!1,configurable:!0}),e.prototype.compress=function(e){var t=new RegExp("(\\"+a.EMPTY_PIECE+"+)","g");return e.replace(t,(function(e){return e.length}))},e.prototype.extract=function(e){return e.replace(/(\d+)/g,(function(e){return Array.from({length:e},(function(){return a.EMPTY_PIECE})).join("")}))},e.prototype.toStringFull=function(){return this.pieceIndices.map((function(e,t){var n=e.toPieceCharCode();return t&&t%a.ROW_NUMBER==0&&t!==a.CELL_COUNT?""+a.BOARD_SEPARATOR+n:n})).join("")},e.prototype.toStringFullNoSeparate=function(){var e=this.toStringFull();return e.replace(/\//g,"")},e.prototype.toString=function(){var e=this.toStringFull();return this.compress(e)},e.prototype.getPieceAtIndex=function(e){return this.pieceIndices[e].piece},e}();t.default=l},177:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(273)),o=n(72),u=function(){function e(e){void 0===e&&(e=""),this.white=null,this.black=null;var t=e.split(".");if(this.white=i.default.isStringNumber(t[0])?Number(t[0]):null,this.black=i.default.isStringNumber(t[1])?Number(t[1]):null,!i.default.isNull(this.white)&&!i.default.isNull(this.white))throw new Error("Invalid countdown string "+e)}return e.prototype.toString=function(){return""+(i.default.isNull(this.white)?o.NOT_SET:this.white)+"."+(i.default.isNull(this.black)?o.NOT_SET:this.black)},e}();t.default=u},717:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(863)),o=function(){function e(e){if(this.pieces=[],e){if(e.length>30||!i.default.isValidPiecesString(e,!0))throw new Error("Invalid graveyard string "+e);this.pieces=e.split("").map((function(t,n){var r=i.default.fromCharCode(t);if(r.isTypeKing)throw new Error("King cannot die graveyard:"+e);return r}))}}return Object.defineProperty(e.prototype,"lastIndex",{get:function(){return this.pieces.length-1},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this.pieces.map((function(e){return e.pieceCharCode})).join("")},e}();t.default=o},999:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(946),o=n(72),u=r(n(863)),a=function(){function e(e){this.whiteKing=!1,this.blackKing=!1,e&&(this.whiteKing=!!~e.indexOf(u.default.toWhiteCharCode(i.PIECE_TYPE_KING)),this.blackKing=!!~e.indexOf(i.PIECE_TYPE_KING))}return e.prototype.toString=function(){return""+(this.whiteKing?u.default.toWhiteCharCode(i.PIECE_TYPE_KING):o.NOT_SET)+""+(this.blackKing?i.PIECE_TYPE_KING:o.NOT_SET)},e}();t.default=a},577:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(946),o=n(72),u=r(n(863)),a=function(){function e(e){this.whiteKing=!1,this.whiteQueen=!1,this.blackKing=!1,this.blackQueen=!1,e&&(this.whiteKing=!!~e.indexOf(u.default.toWhiteCharCode(i.PIECE_TYPE_KING)),this.whiteQueen=!!~e.indexOf(u.default.toWhiteCharCode(i.PIECE_TYPE_QUEEN)),this.blackKing=!!~e.indexOf(i.PIECE_TYPE_KING),this.blackQueen=!!~e.indexOf(i.PIECE_TYPE_QUEEN))}return e.prototype.toString=function(){var e=""+(this.whiteKing?u.default.toWhiteCharCode(i.PIECE_TYPE_KING):o.NOT_SET);return e+=""+(this.whiteQueen?u.default.toWhiteCharCode(i.PIECE_TYPE_QUEEN):o.NOT_SET),(e+=""+(this.blackKing?i.PIECE_TYPE_KING:o.NOT_SET))+""+(this.blackQueen?i.PIECE_TYPE_QUEEN:o.NOT_SET)},e}();t.default=a},863:function(e,t,n){var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(946),u=i(n(273)),a=function(){function e(t,n){this.type=e.toNormalCharCode(t),this.color=n}return Object.defineProperty(e.prototype,"colorOpponent",{get:function(){return e.oppositeColor(this.color)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pieceCharCode",{get:function(){return this.isColorWhite?this.pieceCharCodeWhite:this.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pieceCharCodeWhite",{get:function(){return e.toWhiteCharCode(this.type)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return""+o.PIECE_NAMES[this.type]+o.COLOR_NAMES[this.color]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleEnglish",{get:function(){return o.COLOR_NAMES_ENGLISH[this.color]+"-"+o.PIECE_NAMES_ENGLISH[this.type]},enumerable:!1,configurable:!0}),e.prototype._isTypeEqual=function(e){return this.type===e},Object.defineProperty(e.prototype,"isTypeKing",{get:function(){return this._isTypeEqual(o.PIECE_TYPE_KING)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTypeQueen",{get:function(){return this._isTypeEqual(o.PIECE_TYPE_QUEEN)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTypeBoat",{get:function(){return this._isTypeEqual(o.PIECE_TYPE_BOAT)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTypeHorse",{get:function(){return this._isTypeEqual(o.PIECE_TYPE_HORSE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTypeGeneral",{get:function(){return this._isTypeEqual(o.PIECE_TYPE_GENERAL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTypeFish",{get:function(){return this._isTypeEqual(o.PIECE_TYPE_FISH)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTypeTransformedFish",{get:function(){return this._isTypeEqual(o.PIECE_TYPE_TRANSFORM_FISH)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isColorBlack",{get:function(){return e.isBlackColor(this.color)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isColorWhite",{get:function(){return e.isWhiteColor(this.color)},enumerable:!1,configurable:!0}),e.fromCharCode=function(t){if(!e.isValidPiece(t))return null;var n=e.isWhiteCharCode(t)?o.PIECE_COLOR_WHITE:o.PIECE_COLOR_BLACK,r=e.toNormalCharCode(t);return new e(r,n)},Object.defineProperty(e.prototype,"originPiece",{get:function(){return this.isTypeTransformedFish?new e(o.PIECE_TYPE_FISH,this.color):this},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pieceChars",{get:function(){return[o.PIECE_TYPE_BOAT,o.PIECE_TYPE_HORSE,o.PIECE_TYPE_GENERAL,o.PIECE_TYPE_KING,o.PIECE_TYPE_QUEEN,o.PIECE_TYPE_FISH,o.PIECE_TYPE_TRANSFORM_FISH]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"colorChars",{get:function(){return[o.PIECE_COLOR_WHITE,o.PIECE_COLOR_BLACK]},enumerable:!1,configurable:!0}),e.toWhiteCharCode=function(e){return e.toUpperCase()},e.isWhiteCharCode=function(e){return u.default.isUpperCase(e)},e.toBlackCharCode=function(e){return e.toLowerCase()},e.toNormalCharCode=function(t){return e.toBlackCharCode(t)},e.isValidPiece=function(e){return e!==o.EMPTY_PIECE},e.isWhiteColor=function(e){return e===o.PIECE_COLOR_WHITE},e.isBlackColor=function(e){return e===o.PIECE_COLOR_BLACK},e.oppositeColor=function(t){return e.isWhiteColor(t)?o.PIECE_COLOR_BLACK:o.PIECE_COLOR_WHITE},e.isValidPiecesString=function(e,t){var n=t?s.filter((function(e){return!~[o.EMPTY_PIECE,o.BOARD_SEPARATOR].indexOf(e)})):s;return!e.split("").some((function(e){return!~n.indexOf(e)}))},e}();t.default=a;var s=r(r(r([],a.pieceChars),a.pieceChars.map((function(e){return a.toWhiteCharCode(e)}))),[o.EMPTY_PIECE,o.BOARD_SEPARATOR])},568:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(946),o=r(n(273)),u=function(){function e(e,t){this.canMovePoints=[],this.point=e,this.piece=t}return e.prototype.toCode=function(){return o.default.isNull(this.piece)?""+this.piece.pieceCharCode+this.point.indexCode:null},e.prototype.toPieceCharCode=function(){return o.default.isNull(this.piece)?i.EMPTY_PIECE:this.piece.pieceCharCode},e}();t.default=u},135:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(946),i=function(){function e(e,t){this.x=e,this.y=t}return Object.defineProperty(e.prototype,"index",{get:function(){return e.xyToIndex(this.x,this.y)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"graveyardIndex",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexCode",{get:function(){return""+this.h+this.v},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return""+r.HORIZONTAL_NOTE_LETTERS[this.x]+r.VERTICAL_NOTE_LETTERS[this.y]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleEnglish",{get:function(){return this.indexCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"h",{get:function(){return r.HORIZONTAL_CODE_LETTERS[this.x]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"v",{get:function(){return this.y+1},enumerable:!1,configurable:!0}),e.xyToIndex=function(e,t){return t*r.ROW_NUMBER+e},e.indexCodeToXY=function(e){return{x:r.HORIZONTAL_CODE_LETTERS.indexOf(e[0]),y:Number(e[1])-1}},e.indexCodeToIndex=function(t){var n=e.indexCodeToXY(t),r=n.x,i=n.y;return e.xyToIndex(r,i)},e.fromIndexCode=function(t){var n=e.indexCodeToXY(t);return new e(n.x,n.y)},e.indexToXY=function(e){return{x:e%r.ROW_NUMBER,y:Math.floor(e/r.ROW_NUMBER)}},e.fromIndex=function(t){var n=e.indexToXY(t);return new e(n.x,n.y)},e.fromIndexGraveyardIndex=function(t){return new e(t,0)},e.isIndexInBoard=function(e){return e>=0&&e<=r.CELL_COUNT-1},e}();t.default=i},19:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(191)),o=r(n(577)),u=r(n(999)),a=r(n(177)),s=r(n(717)),c=n(72),l=n(997),f=r(n(762)),d=r(n(135)),h=r(n(863)),p=n(362),E=r(n(639)),_=n(946),g=r(n(273)),v=function(){function e(e){this.moveHelper=new E.default,this.init(e)}return e.prototype.init=function(e){var t=e.boardStr,n=e.turnStr,r=e.kqMovedStr,c=e.kAttackedStr,l=e.countdownStr,f=e.graveyardStr;this.board=new i.default(t),this.turn=n||_.PIECE_COLOR_WHITE,this.kqMoved=new o.default(r),this.kAttacked=new u.default(c),this.countdown=new a.default(l),this.graveyard=new s.default(f);var d=this.isInvalidPieceCount();if(d){var h="Invalid piece string board:"+t;throw new Error(h+=", graveyard:"+f+", count:"+d)}this.moveHelper=new E.default},e.prototype.isInvalidPieceCount=function(){var e=this.board.pieceIndices.map((function(e){return e.piece})).filter((function(e){return!g.default.isNull(e)})).concat(this.graveyard.pieces).map((function(e){return e.originPiece})).reduce((function(e,t){return e[t.pieceCharCode]=e[t.pieceCharCode]||0,e[t.pieceCharCode]++,e}),{}),t=Object.keys(e).map((function(t){return""+t+e[t]})).sort().join("");return t!==c.STRING_COUNT&&t},e.fromString=function(t){g.default.isUndefined(t)&&(t=c.DEFAULT_BOARD_STR);var n=t.split(" ");return new e({boardStr:n[0],turnStr:n[1],kqMovedStr:n[2],kAttackedStr:n[3],countdownStr:n[4],graveyardStr:n[5]})},e.prototype.move=function(e,t){var n=this.board.getPieceAtIndex(e);if(g.default.isNull(n))return null;this.board.pieceIndices[e].piece=null;var r=new f.default({moveFrom:d.default.fromIndex(e),moveTo:d.default.fromIndex(t),piece:n}),i=this.board.getPieceAtIndex(t);return i&&(this.graveyard.pieces.push(i),r.captured=new l.Captured({fromBoardPoint:d.default.fromIndex(t),toGraveyardPoint:d.default.fromIndex(this.graveyard.lastIndex),piece:i})),this.board.pieceIndices[t].piece=n,r},e.prototype.toString=function(){var e=this.board.toString();return e+=" "+this.turn.toString(),e+=" "+this.kqMoved.toString(),e+=" "+this.kAttacked.toString(),(e+=" "+this.countdown.toString())+" "+this.graveyard.toString()},Object.defineProperty(e.prototype,"isQueenMoved",{get:function(){return h.default.isWhiteColor(this.turn)&&this.kqMoved.whiteQueen||h.default.isBlackColor(this.turn)&&this.kqMoved.blackQueen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isKingMoved",{get:function(){return h.default.isWhiteColor(this.turn)&&this.kqMoved.whiteKing||h.default.isBlackColor(this.turn)&&this.kqMoved.blackKing},enumerable:!1,configurable:!0}),e.prototype.genAllCanMoves=function(){return this.moveHelper.calcCanMove({piecesString:this.board.toStringFullNoSeparate(),currentTurn:this.turn,isQueenMoved:this.isQueenMoved,isKingMoved:this.isKingMoved,genCanMove:!0,genCanMoveForAnother:!1}).moves},e.prototype.isHasMoved=function(e){var t=!1;return(this.kqMoved.blackKing&&e.isColorBlack&&e.isTypeKing||this.kqMoved.whiteKing&&e.isColorWhite&&e.isTypeKing||this.kqMoved.blackQueen&&e.isColorBlack&&e.isTypeQueen||this.kqMoved.whiteQueen&&e.isColorWhite&&e.isTypeQueen)&&(t=!0),t},e.prototype.getCanMovePointsByPoint=function(e){var t=this.board.getPieceAtIndex(e.index);return g.default.isNull(t)?[]:this.moveHelper.genCanMovePointsByPiecePoint(e,t,this.board.toStringFullNoSeparate(),this.isHasMoved(t))},e.prototype.getAttacker=function(){var e=this,t=this.moveHelper.calcState({piecesString:this.board.toStringFullNoSeparate(),currentTurn:this.turn,isQueenMoved:this.isQueenMoved,isKingMoved:this.isKingMoved,genCanMove:!1,genCanMoveForAnother:!1}),n=t.blackKingInDanger||t.whiteKingInDanger;return n?n.map((function(t){return new p.PieceIndex(t,e.board.getPieceAtIndex(t.index))})).filter((function(e){return!e.piece.isTypeKing}))[0]:null},e.prototype.getWinColor=function(){return this.moveHelper.calcState({piecesString:this.board.toStringFullNoSeparate(),currentTurn:this.turn,isQueenMoved:this.isQueenMoved,isKingMoved:this.isKingMoved,genCanMove:!1,genCanMoveForAnother:!1}).winColor},e}();t.default=v},72:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_FLAG_DRAW=t.EVENT_FLAG_WINN=t.EVENT_FLAG_ATTACK=t.PIECE_FLAG_UPGRADE=t.PIECE_FLAG_JUMP=t.PIECE_FLAG_KILL=t.NOT_SET=t.DEFAULT_BOARD_STR=t.STRING_COUNT=void 0,t.STRING_COUNT="B2F8G2H2K1Q1b2f8g2h2k1q1",t.DEFAULT_BOARD_STR="BHGKQGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgqkghb",t.NOT_SET="-",t.PIECE_FLAG_KILL="x",t.PIECE_FLAG_JUMP="j",t.PIECE_FLAG_UPGRADE="u",t.EVENT_FLAG_ATTACK="attack",t.EVENT_FLAG_WINN="win",t.EVENT_FLAG_DRAW="draw"},362:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Point=t.REN=t.PieceIndex=t.Piece=t.KqMoved=t.KAttacked=t.Graveyard=t.CountDown=t.Board=void 0;var u=n(191);Object.defineProperty(t,"Board",{enumerable:!0,get:function(){return o(u).default}});var a=n(177);Object.defineProperty(t,"CountDown",{enumerable:!0,get:function(){return o(a).default}});var s=n(717);Object.defineProperty(t,"Graveyard",{enumerable:!0,get:function(){return o(s).default}});var c=n(999);Object.defineProperty(t,"KAttacked",{enumerable:!0,get:function(){return o(c).default}});var l=n(577);Object.defineProperty(t,"KqMoved",{enumerable:!0,get:function(){return o(l).default}});var f=n(863);Object.defineProperty(t,"Piece",{enumerable:!0,get:function(){return o(f).default}});var d=n(568);Object.defineProperty(t,"PieceIndex",{enumerable:!0,get:function(){return o(d).default}});var h=n(19);Object.defineProperty(t,"REN",{enumerable:!0,get:function(){return o(h).default}});var p=n(135);Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return o(p).default}}),i(n(72),t)},876:e=>{e.exports=JSON.parse('{"name":"khmer-chess","version":"1.0.34","description":"KhmerChess Javascript library","main":"src/index.ts","scripts":{"start":"ts-node test-index.ts","test":"jest --passWithNoTests","lint":"eslint . --ext .ts ./src","build:bundle":"webpack --config webpack.config.js","build:js":"del-cli dist -f && npm run lint && npx tsc","build":"npm run build:js && npm run build:bundle"},"repository":{"type":"git","url":"git+https://github.com/K4us/khmer-chess.js.git"},"keywords":["KhmerChess","Khmer","Chess","Node.js","Library"],"author":"Raksa Eng <eng.raksa@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/K4us/khmer-chess.js/issues"},"homepage":"https://github.com/K4us/khmer-chess.js#readme","devDependencies":{"@types/jest":"^26.0.20","@typescript-eslint/eslint-plugin":"^4.15.1","@typescript-eslint/parser":"^4.15.1","del-cli":"^4.0.1","eslint":"^7.20.0","jest":"^26.6.3","ts-jest":"^26.5.1","ts-loader":"^9.2.5","ts-node":"^9.1.1","typescript":"^4.3.5","webpack":"^5.21.2","webpack-cli":"^4.5.0"}}')}},t={};return function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(303)})()}));
//# sourceMappingURL=khmer-chess.umd.js.map